{\rtf1\ansi\ansicpg1252\uc1 \deff0\deflang1033\deflangfe1033{\fonttbl{\f0\froman\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\f1\fswiss\fcharset0\fprq2{\*\panose 020b0604020202020204}Arial;}{\f2\fmodern\fcharset0\fprq1{\*\panose 02070309020205020404}Courier New;}{\f3\froman\fcharset2\fprq2{\*\panose 05050102010706020507}Symbol;}{\f4\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Times{\*\falt Times New Roman};}{\f5\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Helvetica{\*\falt Arial};}{\f6\fmodern\fcharset0\fprq1{\*\panose 00000000000000000000}Courier;}{\f7\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Geneva;}{\f8\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Tms Rmn;}{\f9\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Helv;}{\f10\froman\fcharset0\fprq2{\*\panose 00000000000000000000}MS Serif;}{\f11\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}MS Sans Serif;}{\f12\froman\fcharset0\fprq2{\*\panose 00000000000000000000}New York;}{\f13\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}System;}{\f14\fnil\fcharset2\fprq2{\*\panose 05000000000000000000}Wingdings;}{\f15\fswiss\fcharset0\fprq2{\*\panose 020b0604030504040204}Tahoma;}{\f16\froman\fcharset0\fprq2{\*\panose 02020404030301010803}Garamond;}{\f17\fswiss\fcharset0\fprq2{\*\panose 020b0a04020102020204}Arial Black;}{\f18\fswiss\fcharset0\fprq2{\*\panose 020b0506020202030204}Arial Narrow;}{\f19\fdecor\fcharset2\fprq2{\*\panose 00000000000000000000}ZapfDingbats;}{\f20\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Bookman;}{\f21\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}MS SHELL DLG;}{\f22\fscript\fcharset0\fprq2{\*\panose 030f0702030302020204}Comic Sans MS;}{\f23\fmodern\fcharset255\fprq1{\*\panose 00000000000000000000}Terminal;}{\f24\fmodern\fcharset0\fprq1{\*\panose 00000000000000000000}Fixedsys;}{\f25\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Small Fonts;}{\f26\fnil\fcharset2\fprq2{\*\panose 00000000000000000000}Marlett;}{\f27\fmodern\fcharset0\fprq1{\*\panose 020b0609040504020204}Lucida Console;}{\f28\fmodern\fcharset2\fprq1{\*\panose 00000000000000000000}FW Terminal;}{\f29\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Book Antiqua;}{\f30\froman\fcharset0\fprq2{\*\panose 02050604050505020204}Bookman Old Style;}{\f31\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Century Schoolbook;}{\f32\fnil\fcharset2\fprq2{\*\panose 01010601010101010101}Monotype Sorts;}{\f33\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Map Symbols;}{\f34\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Arial Rounded MT Bold;}{\f35\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Century Gothic;}{\f36\fswiss\fcharset0\fprq2{\*\panose 020b0706040902060204}Haettenschweiler;}{\f37\fdecor\fcharset0\fprq2{\*\panose 00000000000000000000}Algerian;}{\f38\fdecor\fcharset0\fprq2{\*\panose 00000000000000000000}Braggadocio;}{\f39\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Britannic Bold;}{\f40\fscript\fcharset0\fprq2{\*\panose 00000000000000000000}Brush Script MT;}{\f41\fdecor\fcharset0\fprq2{\*\panose 00000000000000000000}Colonna MT;}{\f42\fdecor\fcharset0\fprq2{\*\panose 00000000000000000000}Desdemona;}{\f43\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Footlight MT Light;}{\f44\fswiss\fcharset0\fprq2{\*\panose 020b0806030902050204}Impact;}{\f45\fdecor\fcharset0\fprq2{\*\panose 00000000000000000000}Kino MT;}{\f46\froman\fcharset0\fprq2{\*\panose 020a0a07050505020404}Wide Latin;}{\f47\fscript\fcharset0\fprq2{\*\panose 00000000000000000000}Matura MT Script Capitals;}{\f48\fdecor\fcharset0\fprq2{\*\panose 00000000000000000000}Playbill;}{\f49\fscript\fcharset0\fprq0{\*\panose 00000000000000000000}Old English Text MT;}{\f50\fnil\fcharset0\fprq0{\*\panose 00000000000000000000}New Century Schoolbook;}{\f51\fnil\fcharset0\fprq0{\*\panose 00000000000000000000}WP TypographicSymbols;}{\f52\fmodern\fcharset0\fprq1{\*\panose 00000000000000000000}LinePrinter;}{\f53\froman\fcharset0\fprq2{\*\panose 00000000000000000000}CG Times;}{\f54\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Univers;}{\f55\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Lucida Sans Unicode;}{\f56\fnil\fcharset2\fprq2{\*\panose 05000000000000000000}MS Outlook;}{\f57\froman\fcharset238\fprq2{\*\panose 00000000000000000000}Times New Roman CE;}{\f58\froman\fcharset204\fprq2{\*\panose 00000000000000000000}Times New Roman Cyr;}{\f59\froman\fcharset161\fprq2{\*\panose 00000000000000000000}Times New Roman Greek;}{\f60\froman\fcharset162\fprq2{\*\panose 00000000000000000000}Times New Roman Tur;}{\f61\froman\fcharset186\fprq2{\*\panose 00000000000000000000}Times New Roman Baltic;}{\f62\fswiss\fcharset238\fprq2{\*\panose 00000000000000000000}Arial CE;}{\f63\fswiss\fcharset204\fprq2{\*\panose 00000000000000000000}Arial Cyr;}{\f64\fswiss\fcharset161\fprq2{\*\panose 00000000000000000000}Arial Greek;}{\f65\fswiss\fcharset162\fprq2{\*\panose 00000000000000000000}Arial Tur;}{\f66\fswiss\fcharset186\fprq2{\*\panose 00000000000000000000}Arial Baltic;}{\f67\fmodern\fcharset238\fprq1{\*\panose 00000000000000000000}Courier New CE;}{\f68\fmodern\fcharset204\fprq1{\*\panose 00000000000000000000}Courier New Cyr;}{\f69\fmodern\fcharset161\fprq1{\*\panose 00000000000000000000}Courier New Greek;}{\f70\fmodern\fcharset162\fprq1{\*\panose 00000000000000000000}Courier New Tur;}{\f71\fmodern\fcharset186\fprq1{\*\panose 00000000000000000000}Courier New Baltic;}{\f72\froman\fcharset238\fprq2{\*\panose 00000000000000000000}TIMES CE;}{\f73\froman\fcharset204\fprq2{\*\panose 00000000000000000000}TIMES Cyr;}{\f74\froman\fcharset161\fprq2{\*\panose 00000000000000000000}TIMES Greek;}{\f75\froman\fcharset162\fprq2{\*\panose 00000000000000000000}TIMES Tur;}{\f76\froman\fcharset186\fprq2{\*\panose 00000000000000000000}TIMES Baltic;}{\f77\fswiss\fcharset238\fprq2{\*\panose 00000000000000000000}HELVETICA CE;}{\f78\fswiss\fcharset204\fprq2{\*\panose 00000000000000000000}HELVETICA Cyr;}{\f79\fswiss\fcharset161\fprq2{\*\panose 00000000000000000000}HELVETICA Greek;}{\f80\fswiss\fcharset162\fprq2{\*\panose 00000000000000000000}HELVETICA Tur;}{\f81\fswiss\fcharset186\fprq2{\*\panose 00000000000000000000}HELVETICA Baltic;}{\f82\fswiss\fcharset238\fprq2{\*\panose 00000000000000000000}Lucida Sans Unicode CE;}{\f83\fswiss\fcharset204\fprq2{\*\panose 00000000000000000000}Lucida Sans Unicode Cyr;}{\f84\fswiss\fcharset161\fprq2{\*\panose 00000000000000000000}Lucida Sans Unicode Greek;}{\f85\fswiss\fcharset162\fprq2{\*\panose 00000000000000000000}Lucida Sans Unicode Tur;}{\f86\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Univers Condensed;}{\f87\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Antique Olive;}{\f88\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}CG Omega;}{\f89\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Albertus Medium;}{\f90\fswiss\fcharset0\fprq2{\*\panose 00000000000000000000}Albertus Extra Bold;}{\f91\froman\fcharset0\fprq2{\*\panose 00000000000000000000}Clarendon Condensed;}{\f92\fscript\fcharset0\fprq2{\*\panose 00000000000000000000}Coronet;}{\f93\fmodern\fcharset0\fprq1{\*\panose 00000000000000000000}Letter Gothic;}{\f94\fscript\fcharset0\fprq2{\*\panose 00000000000000000000}Marigold;}{\f95\froman\fcharset2\fprq2{\*\panose 05050102010205020202}MT Extra;}{\f96\fswiss\fcharset0\fprq2{\*\panose 020b0504020203020204}News Gothic MT;}{\f97\fdecor\fcharset0\fprq2{\*\panose 04040a05050d02020502}Beesknees ITC;}{\f98\fscript\fcharset0\fprq2{\*\panose 03070402050302030203}Bradley Hand ITC;}{\f99\froman\fcharset0\fprq2{\*\panose 02040603050505030304}Calisto MT;}{\f100\fdecor\fcharset0\fprq2{\*\panose 04040404050702020202}Curlz MT;}{\f101\froman\fcharset0\fprq2{\*\panose 02020904090505020303}Elephant;}{\f102\fswiss\fcharset0\fprq2{\*\panose 020b0907030504020204}Eras Bold ITC;}{\f103\fswiss\fcharset0\fprq2{\*\panose 020b0805030504020804}Eras Demi ITC;}{\f104\fswiss\fcharset0\fprq2{\*\panose 020b0402030504020804}Eras Light ITC;}{\f105\fswiss\fcharset0\fprq2{\*\panose 020b0602030504020804}Eras Medium ITC;}{\f106\fswiss\fcharset0\fprq2{\*\panose 020b0a07030504020204}Eras Ultra ITC;}{\f107\fdecor\fcharset0\fprq2{\*\panose 04040403040a02020202}Juice ITC;}{\f108\fdecor\fcharset0\fprq2{\*\panose 04040403030d02020704}Matisse ITC;}{\f109\froman\fcharset0\fprq2{\*\panose 02060603020205020403}Rockwell;}{\f110\froman\fcharset0\fprq2{\*\panose 02060903040505020403}Rockwell Extra Bold;}{\f111\fdecor\fcharset0\fprq2{\*\panose 04040a07060a02020202}Snap ITC;}{\f112\fdecor\fcharset0\fprq2{\*\panose 04020404030d07020202}Tempus Sans ITC;}{\f113\fswiss\fcharset0\fprq2{\*\panose 020b0604030504040204}Verdana;}{\f114\fscript\fcharset0\fprq2{\*\panose 03070502030502020203}Viner Hand ITC;}{\f205\fswiss\fcharset238\fprq2 Tahoma CE;}{\f206\fswiss\fcharset204\fprq2 Tahoma Cyr;}{\f208\fswiss\fcharset161\fprq2 Tahoma Greek;}{\f209\fswiss\fcharset162\fprq2 Tahoma Tur;}{\f210\fswiss\fcharset186\fprq2 Tahoma Baltic;}{\f211\froman\fcharset238\fprq2 Garamond CE;}{\f212\froman\fcharset204\fprq2 Garamond Cyr;}{\f214\froman\fcharset161\fprq2 Garamond Greek;}{\f215\froman\fcharset162\fprq2 Garamond Tur;}{\f216\froman\fcharset186\fprq2 Garamond Baltic;}{\f217\fswiss\fcharset238\fprq2 Arial Black CE;}{\f218\fswiss\fcharset204\fprq2 Arial Black Cyr;}{\f220\fswiss\fcharset161\fprq2 Arial Black Greek;}{\f221\fswiss\fcharset162\fprq2 Arial Black Tur;}{\f222\fswiss\fcharset186\fprq2 Arial Black Baltic;}{\f223\fswiss\fcharset238\fprq2 Arial Narrow CE;}{\f224\fswiss\fcharset204\fprq2 Arial Narrow Cyr;}{\f226\fswiss\fcharset161\fprq2 Arial Narrow Greek;}{\f227\fswiss\fcharset162\fprq2 Arial Narrow Tur;}{\f228\fswiss\fcharset186\fprq2 Arial Narrow Baltic;}{\f277\fmodern\fcharset238\fprq1 Lucida Console CE;}{\f278\fmodern\fcharset204\fprq1 Lucida Console Cyr;}{\f280\fmodern\fcharset161\fprq1 Lucida Console Greek;}{\f281\fmodern\fcharset162\fprq1 Lucida Console Tur;}{\f295\froman\fcharset238\fprq2 Bookman Old Style CE;}{\f296\froman\fcharset204\fprq2 Bookman Old Style Cyr;}{\f298\froman\fcharset161\fprq2 Bookman Old Style Greek;}{\f299\froman\fcharset162\fprq2 Bookman Old Style Tur;}{\f300\froman\fcharset186\fprq2 Bookman Old Style Baltic;}{\f379\fswiss\fcharset238\fprq2 Impact CE;}{\f380\fswiss\fcharset204\fprq2 Impact Cyr;}{\f382\fswiss\fcharset161\fprq2 Impact Greek;}{\f383\fswiss\fcharset162\fprq2 Impact Tur;}{\f384\fswiss\fcharset186\fprq2 Impact Baltic;}}{\colortbl;\red0\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0;\red255\green0\blue255;\red255\green0\blue0;\red255\green255\blue0;\red255\green255\blue255;\red0\green0\blue128;\red0\green128\blue128;\red0\green128\blue0;\red128\green0\blue128;\red128\green0\blue0;\red128\green128\blue0;\red128\green128\blue128;\red192\green192\blue192;}{\stylesheet{\nowidctlpar\widctlpar\adjustright \fs20\cgrid \snext0 Normal;}{\s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid \sbasedon0 \snext0 heading 1;}{\s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid \sbasedon0 \snext0 heading 2;}{\s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid \sbasedon0 \snext0 heading 3;}{\s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid \sbasedon0 \snext0 heading 4;}{\s5\fi-1008\li1008\sb240\sa60\nowidctlpar\widctlpar\jclisttab\tx1008\ls1\ilvl4\outlinelevel4\adjustright \f1\fs22\cgrid \sbasedon0 \snext0 heading 5;}{\s6\fi-1152\li1152\sb240\sa60\nowidctlpar\widctlpar\jclisttab\tx1152\ls1\ilvl5\outlinelevel5\adjustright \i\fs22\cgrid \sbasedon0 \snext0 heading 6;}{\s7\fi-1296\li1296\sb240\sa60\nowidctlpar\widctlpar\jclisttab\tx1296\ls1\ilvl6\outlinelevel6\adjustright \f1\fs20\cgrid \sbasedon0 \snext0 heading 7;}{\s8\fi-1440\li1440\sb240\sa60\nowidctlpar\widctlpar\jclisttab\tx1440\ls1\ilvl7\outlinelevel7\adjustright \i\f1\fs20\cgrid \sbasedon0 \snext0 heading 8;}{\s9\fi-1584\li1584\sb240\sa60\nowidctlpar\widctlpar\jclisttab\tx1584\ls1\ilvl8\outlinelevel8\adjustright \b\i\f1\fs18\cgrid \sbasedon0 \snext0 heading 9;}{\*\cs10 \additive Default Paragraph Font;}{\s15\li2160\sa120\nowidctlpar\widctlpar\brdrt\brdrs\brdrw30\brsp20 \brdrbtw\brdrs\brdrw30\brsp20 \phmrg\posyt\adjustright \b\f5\fs48\cgrid \sbasedon16 \snext16 Title Large;}{\s16\li2160\sa120\nowidctlpar\widctlpar\phmrg\posyt\adjustright \b\f5\fs28\cgrid \sbasedon0 \snext17 Title Medium;}{\s17\li2160\sa120\nowidctlpar\widctlpar\phmrg\posyt\adjustright \i\f5\fs20\cgrid \sbasedon0 \snext17 Title Small;}{\s18\sb120\sa120\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid \sbasedon0 \snext0 \sautoupd toc 1;}{\s19\li200\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid \sbasedon0 \snext0 \sautoupd toc 2;}{\s20\li400\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \i\fs20\cgrid \sbasedon0 \snext0 \sautoupd toc 3;}{\s21\nowidctlpar\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \fs20\cgrid \sbasedon0 \snext21 header;}{\s22\nowidctlpar\widctlpar\adjustright \f2\fs18\cgrid \sbasedon0 \snext22 code;}{\s23\nowidctlpar\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \fs20\cgrid \sbasedon0 \snext23 footer;}{\*\cs24 \additive \sbasedon10 page number;}{\s25\li600\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \fs18\cgrid \sbasedon0 \snext0 \sautoupd toc 4;}{\s26\fi-3600\li4320\nowidctlpar\widctlpar\adjustright \fs20\cgrid \sbasedon0 \snext26 list;}{\s27\li800\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \fs18\cgrid \sbasedon0 \snext0 \sautoupd toc 5;}{\s28\li1000\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \fs18\cgrid \sbasedon0 \snext0 \sautoupd toc 6;}{\s29\li1200\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \fs18\cgrid \sbasedon0 \snext0 \sautoupd toc 7;}{\s30\li1400\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \fs18\cgrid \sbasedon0 \snext0 \sautoupd toc 8;}{\s31\li1600\nowidctlpar\widctlpar\tqr\tldot\tx8640\adjustright \fs18\cgrid \sbasedon0 \snext0 \sautoupd toc 9;}{\s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid \sbasedon0 \snext32 footnote text;}{\*\cs33 \additive \super \sbasedon10 footnote reference;}{\s34\fi-1890\li2610\nowidctlpar\widctlpar\adjustright \fs20\cgrid \sbasedon35 \snext34 n;}{\s35\fi-1890\li2610\nowidctlpar\widctlpar\adjustright \i\fs20\cgrid \sbasedon26 \snext35 list2;}{\s36\li1440\nowidctlpar\widctlpar\adjustright \fs20\cgrid \sbasedon0 \snext36 descrip2;}{\s37\nowidctlpar\widctlpar\adjustright \f4\fs20\cgrid \sbasedon0 \snext37 Special;}}{\*\listtable{\list\listtemplateid67698725{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'01\'00;}{\levelnumbers\'01;}\s1\fi-432\li432\jclisttab\tx432 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'03\'00.\'01;}{\levelnumbers\'01\'03;}\s2\fi-576\li576\jclisttab\tx576 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'05\'00.\'01.\'02;}{\levelnumbers\'01\'03\'05;}\s3\fi-720\li720\jclisttab\tx720 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'07\'00.\'01.\'02.\'03;}{\levelnumbers\'01\'03\'05\'07;}\s4\fi-864\li864\jclisttab\tx864 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'09\'00.\'01.\'02.\'03.\'04;}{\levelnumbers\'01\'03\'05\'07\'09;}\s5\fi-1008\li1008\jclisttab\tx1008 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext
\'0b\'00.\'01.\'02.\'03.\'04.\'05;}{\levelnumbers\'01\'03\'05\'07\'09\'0b;}\s6\fi-1152\li1152\jclisttab\tx1152 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'0d\'00.\'01.\'02.\'03.\'04.\'05.\'06;}{\levelnumbers\'01\'03\'05\'07\'09\'0b\'0d;}\s7\fi-1296\li1296\jclisttab\tx1296 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'0f\'00.\'01.\'02.\'03.\'04.\'05.\'06.\'07;}{\levelnumbers\'01\'03\'05\'07\'09\'0b\'0d\'0f;}\s8\fi-1440\li1440\jclisttab\tx1440 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext
\'11\'00.\'01.\'02.\'03.\'04.\'05.\'06.\'07.\'08;}{\levelnumbers\'01\'03\'05\'07\'09\'0b\'0d\'0f\'11;}\s9\fi-1584\li1584\jclisttab\tx1584 }{\listname ;}\listid-5}{\list\listtemplateid-1\listsimple{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat0\levelspace0\levelindent0{\leveltext\'01*;}{\levelnumbers;}}{\listname ;}\listid-2}{\list\listtemplateid67698689\listsimple{\listlevel\levelnfc23\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'01\u-3913 ?;}{\levelnumbers;}\f3\fbias0 \fi-360\li360\jclisttab\tx360 }{\listname ;}\listid19747162}{\list\listtemplateid67698703\listsimple{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360 }{\listname ;}\listid921262504}{\list\listtemplateid67698703\listsimple{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360 }{\listname ;}\listid989216002}{\list\listtemplateid67698689\listsimple{\listlevel\levelnfc23\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'01\u-3913 ?;}{\levelnumbers;}\f3\fbias0 \fi-360\li360\jclisttab\tx360 }{\listname ;}\listid1143540277}{\list\listtemplateid67698689\listsimple{\listlevel\levelnfc23\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext
\'01\u-3913 ?;}{\levelnumbers;}\f3\fbias0 \fi-360\li360\jclisttab\tx360 }{\listname ;}\listid1174035003}{\list\listtemplateid67698689\listsimple{\listlevel\levelnfc23\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'01\u-3913 ?;}{\levelnumbers;}\f3\fbias0 \fi-360\li360\jclisttab\tx360 }{\listname ;}\listid1488589292}{\list\listtemplateid67698703\listsimple{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360 }{\listname ;}\listid1504053759}{\list\listtemplateid67698719{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360\jclisttab\tx360 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'04\'00.\'01.;}{\levelnumbers\'01\'03;}\fi-432\li792\jclisttab\tx792 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'06\'00.\'01.\'02.;}{\levelnumbers\'01\'03\'05;}\fi-504\li1224\jclisttab\tx1440 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'08\'00.\'01.\'02.\'03.;}{\levelnumbers
\'01\'03\'05\'07;}\fi-648\li1728\jclisttab\tx1800 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'0a\'00.\'01.\'02.\'03.\'04.;}{\levelnumbers\'01\'03\'05\'07\'09;}\fi-792\li2232\jclisttab\tx2520 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'0c\'00.\'01.\'02.\'03.\'04.\'05.;}{\levelnumbers\'01\'03\'05\'07\'09\'0b;}\fi-936\li2736\jclisttab\tx2880 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'0e\'00.\'01.\'02.\'03.\'04.\'05.\'06.;}{\levelnumbers\'01\'03\'05\'07\'09\'0b\'0d;}\fi-1080\li3240\jclisttab\tx3600 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext
\'10\'00.\'01.\'02.\'03.\'04.\'05.\'06.\'07.;}{\levelnumbers\'01\'03\'05\'07\'09\'0b\'0d\'0f;}\fi-1224\li3744\jclisttab\tx3960 }{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'12\'00.\'01.\'02.\'03.\'04.\'05.\'06.\'07.\'08.;}{\levelnumbers\'01\'03\'05\'07\'09\'0b\'0d\'0f\'11;}\fi-1440\li4320\jclisttab\tx4680 }{\listname ;}\listid1598560031}{\list\listtemplateid67698689\listsimple{\listlevel\levelnfc23\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'01\u-3913 ?;}{\levelnumbers;}\f3\fbias0 \fi-360\li360\jclisttab\tx360 }{\listname ;}\listid1888375013}{\list\listtemplateid67698689\listsimple{\listlevel\levelnfc23\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext
\'01\u-3913 ?;}{\levelnumbers;}\f3\fbias0 \fi-360\li360\jclisttab\tx360 }{\listname ;}\listid1912691979}{\list\listtemplateid67698703\listsimple{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelspace0\levelindent0{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360\jclisttab\tx360 }{\listname ;}\listid2078280203}}{\*\listoverridetable{\listoverride\listid-5\listoverridecount0\ls1}{\listoverride\listid-2\listoverridecount1{\lfolevel\listoverrideformat{\listlevel\levelnfc23\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'01\u-3913 ?;}{\levelnumbers;}\f3\fbias0 \fi-360\li360 }}\ls2}{\listoverride\listid1504053759\listoverridecount0\ls3}{\listoverride\listid1504053759\listoverridecount1{\lfolevel\listoverrideformat{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360 }}\ls4}{\listoverride\listid989216002\listoverridecount0\ls5}{\listoverride\listid989216002\listoverridecount1{\lfolevel\listoverrideformat{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360 }}\ls6}{\listoverride\listid921262504\listoverridecount0\ls7}{\listoverride\listid921262504\listoverridecount1{\lfolevel\listoverrideformat{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360 }}\ls8}{\listoverride\listid921262504\listoverridecount1{\lfolevel\listoverrideformat{\listlevel\levelnfc0\leveljc0\levelfollow0\levelstartat1\levelold\levelspace0\levelindent360{\leveltext\'02\'00.;}{\levelnumbers\'01;}\fi-360\li360 }}\ls9}{\listoverride\listid1143540277\listoverridecount0\ls10}{\listoverride\listid1912691979\listoverridecount0\ls11}{\listoverride\listid1488589292\listoverridecount0\ls12}{\listoverride\listid1888375013\listoverridecount0\ls13}{\listoverride\listid1598560031\listoverridecount0\ls14}{\listoverride\listid19747162\listoverridecount0\ls15}{\listoverride\listid2078280203\listoverridecount0\ls16}{\listoverride\listid1174035003\listoverridecount0\ls17}}{\*\revtbl {Unknown;}}{\info{\title Winsock Generic QOS Mapping}{\subject Winsock Generic QOS Mapping}{\author Yorman Bernet}{\operator Chris Steck}{\creatim\yr1997\mo3\dy31\hr19\min57}{\revtim\yr1997\mo3\dy31\hr19\min57}{\printim\yr1996\mo11\dy4\hr15\min58}{\version2}{\edmins1}{\nofpages8}{\nofwords11464}{\nofchars65345}{\*\company Microsoft}{\nofcharsws80248}{\vern71}}\widowctrl\ftnbj\aenddoc\lytprtmet\hyphcaps0\formshade\viewkind1\viewscale100\pgbrdrhead\pgbrdrfoot \fet0\sectd \sbknone\linex0\endnhere\titlepg\sectdefaultcl {\header \pard\plain \s21\nowidctlpar\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \fs20\cgrid {\field{\*\fldinst {\f18\fs16  SUBJECT  \\* MERGEFORMAT }}{\fldrslt {\f18\fs16 Winsock Generic QOS Mapping}}}{\f18\fs16 \tab Draft\tab Version 0. }{\field{\*\fldinst {\f18\fs16  DOCPROPERTY "RevisionNumber"  \\* MERGEFORMAT }}{\fldrslt {\f18\fs16 5}}}{\f18 
\par }{\lang1024 {\shp{\*\shpinst\shpleft-72\shptop202\shpright8713\shpbottom203\shpfhdr1\shpbxcolumn\shpbypara\shpwr3\shpwrk0\shpfblwtxt0\shpz0\shplid2049{\sp{\sn shapeType}{\sv 20}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn lineStartArrowWidth}{\sv 0}}{\sp{\sn lineStartArrowLength}{\sv 0}}{\sp{\sn lineEndArrowWidth}{\sv 0}}{\sp{\sn lineEndArrowLength}{\sv 0}}{\sp{\sn fShadow}{\sv 0}}}{\shprslt{\*\do\dobxcolumn\dobypara\dodhgt8192\dpline\dpptx0\dppty0\dpptx8785\dppty1\dpx-72\dpy202\dpxsize8785\dpysize1\dplinew15\dplinecor0\dplinecog0\dplinecob0}}}}{
\par }}{\footer \pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {\i\f18\fs16 
\par }{\lang1024 {\shp{\*\shpinst\shpleft-72\shptop1\shpright8713\shpbottom2\shpfhdr1\shpbxcolumn\shpbypara\shpwr3\shpwrk0\shpfblwtxt0\shpz1\shplid2050{\sp{\sn shapeType}{\sv 20}}{\sp{\sn fFlipH}{\sv 0}}{\sp{\sn fFlipV}{\sv 0}}{\sp{\sn lineStartArrowWidth}{\sv 0}}{\sp{\sn lineStartArrowLength}{\sv 0}}{\sp{\sn lineEndArrowWidth}{\sv 0}}{\sp{\sn lineEndArrowLength}{\sv 0}}{\sp{\sn fShadow}{\sv 0}}}{\shprslt{\*\do\dobxcolumn\dobypara\dodhgt8193\dpline\dpptx0\dppty0\dpptx8785\dppty1\dpx-72\dpy1\dpxsize8785\dpysize1\dplinew15\dplinecor0\dplinecog0\dplinecob0}}}}{\i\f18\fs16 
\par }{\field{\*\fldinst {\i\f18\fs16  DATE }}{\fldrslt {\i\f18\fs16\lang1024 03/31/97}}}{\i\f18\fs16  }{\field{\*\fldinst {\i\f18\fs16  TIME }}{\fldrslt {\i\f18\fs16\lang1024 7:55 PM}}}{\i\f18\fs16 \tab \tab \tab \tab \tab \tab \tab \tab \tab \tab Page }{\field{\*\fldinst {\cs24\i\fs16  PAGE }}{\fldrslt {\cs24\i\fs16\lang1024 2}}}{\i\f18\fs18 
\par }\pard\plain \s23\nowidctlpar\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \fs20\cgrid {\f18\fs18 \tab \tab }{
\par }}{\headerf \pard\plain \s21\nowidctlpar\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \fs20\cgrid {\f18 
\par }{
\par }}{\footerf \pard\plain \s23\nowidctlpar\widctlpar\tqc\tx4320\tqr\tx8640\adjustright \fs20\cgrid {\f18\fs18 \tab \tab \tab \tab }{\f18 \tab \tab }{
\par }}{\*\pnseclvl1\pnucrm\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl2\pnucltr\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl3\pndec\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl4\pnlcltr\pnstart1\pnindent720\pnhang{\pntxta )}}{\*\pnseclvl5\pndec\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl6\pnlcltr\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl7\pnlcrm\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl8\pnlcltr\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl9\pnlcrm\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}\pard\plain \s15\li1980\sa120\nowidctlpar\widctlpar\brdrt\brdrs\brdrw30\brsp20 \brdrbtw\brdrs\brdrw30\brsp20 \tqr\tx9360\adjustright \b\f5\fs48\cgrid {\f1\cf2 Windows Networking Group
\par }\pard \s15\li1980\sa120\nowidctlpar\widctlpar\brdrb\brdrs\brdrw30\brsp20 \tqr\tx9360\adjustright {\*\bkmkstart OLE_LINK2}{\field\fldedit{\*\fldinst {\i\f0\fs40\cf2  DOCPROPERTY "Subject"  \\* MERGEFORMAT }}{\fldrslt {\i\f0\fs40\cf2 Winsock2 Generic QOS Mapping}}}{\i\f0\fs40\cf2 {\*\bkmkend OLE_LINK2} (DRAFT)}{\f1\cf2 
\par }\pard\plain \s16\li1980\sa120\nowidctlpar\widctlpar\adjustright \b\f5\fs28\cgrid {\f1\cf2 mapping
\par }\pard\plain \s17\li1980\sa120\nowidctlpar\widctlpar\adjustright \i\f5\fs20\cgrid {\f1\cf2 Author: Yoram Bernet, Jim Stewart, Raj Yavatkar, Dave Andersen, Charlie Tai
\par Version 2.6
\par }\pard \s17\li1980\sa120\nowidctlpar\widctlpar\tx6570\adjustright {\i0\f1\cf2 Last Saved: }{\field{\*\fldinst {\i0\f1\cf2  SAVEDATE  \\* MERGEFORMAT }}{\fldrslt {\i0\f1\cf2\lang1024 03/31/97 2:41 PM}}}{\i0\f1\cf2 
\par Status: }{\b\i0\f1\ul\cf2 UNDER DEVELOPMENT}{\i0\f1\cf2 
\par 
\par }\pard \s17\li1980\sa120\nowidctlpar\widctlpar\adjustright {\f1\cf6 
\par 
\par }\pard \s17\qc\li1980\sa120\nowidctlpar\widctlpar\adjustright {\f1\cf6 \page 
\par }\pard\plain \qc\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\f17\fs28\cf6 Table of Contents
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx400\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\field\fldedit{\*\fldinst {\b0\f5\fs28  TOC \\o "1-3" }}{\fldrslt {\lang1024 1\tab Overview\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459447 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 4 7    GR}}}{\fldrslt {\lang1024 4}}}{\lang1024 
\par 2\tab Generic QoS vs. Annexes\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459448 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 4 8    @ }}}{\fldrslt {\lang1024 4}}}{\lang1024 
\par 3\tab General Strategy for Mapping GQoS to RSVP\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459449 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 4 9    @ }}}{\fldrslt {\lang1024 4}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 3.1\tab RSVP Functionality\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459450 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 0      }}}{\fldrslt {\lang1024 4}}}{\lang1024 
\par 3.2\tab Using Winsock2 APIs to Invoke RSVP Functionality\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459451 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 1    @ }}}{\fldrslt {\lang1024 5}}}{\lang1024 
\par }\pard\plain \s20\li400\nowidctlpar\widctlpar\tx1200\tqr\tldot\tx8640\adjustright \i\fs20\cgrid {\lang1024 3.2.1\tab QoS Related Calls\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459452 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 2      }}}{\fldrslt {\lang1024 5}}}{\lang1024 
\par 3.2.2\tab Implicit Invocation of QoS\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459453 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 3    z }}}{\fldrslt {\lang1024 5}}}{\lang1024 
\par 3.2.3\tab Information Required to Generate PATH and RESV Messages\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459454 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 4     À}}}{\fldrslt {\lang1024 5}}}{\lang1024 
\par 3.2.4\tab Triggering the Transmission of PATH and RESV Messages\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459455 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 5    þ }}}{\fldrslt {\lang1024 6}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 3.3\tab Responses/Notifications From RSVP to Applications\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459456 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 6      }}}{\fldrslt {\lang1024 6}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx400\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 4\tab General Concepts\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459457 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 7    Ë }}}{\fldrslt {\lang1024 6}}}{\lang1024 
\par }\pard\plain \s20\li400\nowidctlpar\widctlpar\tx1200\tqr\tldot\tx8640\adjustright \i\fs20\cgrid {\lang1024 4.1.1\tab RSVP as a Service Provider\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459458 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 8    Ë}}}{\fldrslt {\lang1024 6}}}{\lang1024 
\par 4.1.2\tab Binding\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459459 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 5 9      }}}{\fldrslt {\lang1024 7}}}{\lang1024 
\par 4.1.3\tab WSAIoctl(SIO_LOCAL_INTERFACE_QUERY) and Change Notifications\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459460 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 0      }}}{\fldrslt {\lang1024 8}}}{\lang1024 
\par 4.1.4\tab Port Number Negotiation\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459461 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 1      }}}{\fldrslt {\lang1024 9}}}{\lang1024 
\par 4.1.5\tab WSAIoctl (SIO_SET_QOS)\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459462 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 2     }}}{\fldrslt {\lang1024 9}}}{\lang1024 
\par 4.1.6\tab Sending RESV Messages Based on Matching PATH State\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459463 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 3    þ}}}{\fldrslt {\lang1024 9}}}{\lang1024 
\par 4.1.7\tab QoS for Transmitted Data Contingent on RESV\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459464 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 4      }}}{\fldrslt {\lang1024 10}}}{\lang1024 
\par 4.1.8\tab GQoS and IP\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459465 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 5     Ë}}}{\fldrslt {\lang1024 10}}}{\lang1024 
\par 4.1.9\tab Use of }{\b\lang1024 WSAJoinLeaf}{\lang1024  and }{\b\lang1024 sendto }{\lang1024 for Multicast Sessions\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459466 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 6     }}}{\fldrslt {\lang1024 10}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx400\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 5\tab Detailed Mapping of GQoS to RSVP \endash  Call Sequences\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459467 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 7      }}}{\fldrslt {\lang1024 11}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 5.1\tab Sending Applications\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459468 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 8    z }}}{\fldrslt {\lang1024 11}}}{\lang1024 
\par }\pard\plain \s20\li400\nowidctlpar\widctlpar\tx1200\tqr\tldot\tx8640\adjustright \i\fs20\cgrid {\lang1024 5.1.1\tab Unicast UDP Senders\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459469 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 6 9     À}}}{\fldrslt {\lang1024 12}}}{\lang1024 
\par 5.1.2\tab Multicast UDP Senders\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459470 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 0     }}}{\fldrslt {\lang1024 12}}}{\lang1024 
\par 5.1.3\tab Unicast TCP Senders\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459471 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 1      }}}{\fldrslt {\lang1024 12}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 5.2\tab Receiving Applications\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459472 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 2      }}}{\fldrslt {\lang1024 13}}}{\lang1024 
\par }\pard\plain \s20\li400\nowidctlpar\widctlpar\tx1200\tqr\tldot\tx8640\adjustright \i\fs20\cgrid {\lang1024 5.2.1\tab Unicast UDP Receivers\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459473 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 3    Ë}}}{\fldrslt {\lang1024 13}}}{\lang1024 
\par 5.2.2\tab Multicast UDP Receivers\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459474 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 4    }}}{\fldrslt {\lang1024 14}}}{\lang1024 
\par 5.2.3\tab Unicast TCP Receivers\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459475 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 5      }}}{\fldrslt {\lang1024 15}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 5.3\tab Use of WSAIoctl(SIO_SET_QOS)\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459476 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 6     Î}}}{\fldrslt {\lang1024 15}}}{\lang1024 
\par 5.4\tab Terminating QoS Service\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459477 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 7    }}}{\fldrslt {\lang1024 15}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx400\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 6\tab Detailed Mapping of GQoS to RSVP - QoS Parameters\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459478 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 8    þ}}}{\fldrslt {\lang1024 16}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 6.1\tab Tspec\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459479 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 7 9      }}}{\fldrslt {\lang1024 16}}}{\lang1024 
\par }\pard\plain \s20\li400\nowidctlpar\widctlpar\tx1200\tqr\tldot\tx8640\adjustright \i\fs20\cgrid {\lang1024 6.1.1\tab SenderTspec\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459480 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 0     Ë}}}{\fldrslt {\lang1024 16}}}{\lang1024 
\par 6.1.2\tab ReceiverTspec\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459481 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 1      }}}{\fldrslt {\lang1024 17}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 6.2\tab Rspec\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459482 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 2      }}}{\fldrslt {\lang1024 17}}}{\lang1024 
\par 6.3\tab Service Types\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459483 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 3    }}}{\fldrslt {\lang1024 18}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx400\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 7\tab Reservation Styles\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459484 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 4     }}}{\fldrslt {\lang1024 18}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 7.1\tab Fixed Filter - Unicast\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459485 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 5      }}}{\fldrslt {\lang1024 19}}}{\lang1024 
\par 7.2\tab Wildcard Filter - Multicast\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459486 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 6      }}}{\fldrslt {\lang1024 19}}}{\lang1024 
\par 7.3\tab Shared Explicit\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459487 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 7      }}}{\fldrslt {\lang1024 19}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx400\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 8\tab Use of }{\i\lang1024 ProviderSpecific }{\lang1024 Structure\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459488 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 8     Ë}}}{\fldrslt {\lang1024 19}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 8.1\tab The RSVP_RESERVE_INFO Object\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459489 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 8 9      }}}{\fldrslt {\lang1024 19}}}{\lang1024 
\par 8.2\tab Alternate Reservation Styles\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459490 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 0      }}}{\fldrslt {\lang1024 20}}}{\lang1024 
\par }\pard\plain \s20\li400\nowidctlpar\widctlpar\tx1200\tqr\tldot\tx8640\adjustright \i\fs20\cgrid {\lang1024 8.2.1\tab Single FixedFilter Reservations\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459491 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 1      }}}{\fldrslt {\lang1024 20}}}{\lang1024 
\par 8.2.2\tab Multiple FixedFilter Reservations in a Single Reservation\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459492 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 2      }}}{\fldrslt {\lang1024 20}}}{\lang1024 
\par 8.2.3\tab Shared Explicit Reservations\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459493 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 3      }}}{\fldrslt {\lang1024 20}}}{\lang1024 
\par 8.2.4\tab WF Reservations\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459494 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 4      }}}{\fldrslt {\lang1024 20}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 8.3\tab The Priority Object\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459495 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 5      }}}{\fldrslt {\lang1024 20}}}{\lang1024 
\par }\pard\plain \s20\li400\nowidctlpar\widctlpar\tx1200\tqr\tldot\tx8640\adjustright \i\fs20\cgrid {\lang1024 8.3.1\tab Packet Sequencing\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459496 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 6      }}}{\fldrslt {\lang1024 20}}}{\lang1024 
\par 8.3.2\tab Avoiding Starvation\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459497 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 7      }}}{\fldrslt {\lang1024 21}}}{\lang1024 
\par 8.3.3\tab Usage\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459498 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 8      }}}{\fldrslt {\lang1024 21}}}{\lang1024 
\par 8.3.4\tab Relation to Socket Group Priority\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459499 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 4 9 9      }}}{\fldrslt {\lang1024 21}}}{\lang1024 
\par 8.3.5\tab Relation to 802.1p\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459500 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 0      }}}{\fldrslt {\lang1024 21}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx400\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 9\tab Status Indications from the RSVP SP to Applications\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459501 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 1      }}}{\fldrslt {\lang1024 21}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 9.1\tab Use of the ProviderSpecific Structure for Status Indications\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459502 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 2      }}}{\fldrslt {\lang1024 22}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx600\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 10\tab WSAGetQoSByName\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459503 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 3      }}}{\fldrslt {\lang1024 22}}}{\lang1024 
\par 11\tab QoS For Socket Groups\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459504 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 4      }}}{\fldrslt {\lang1024 22}}}{\lang1024 
\par 12\tab Protocol Chaining\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459505 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 5      }}}{\fldrslt {\lang1024 23}}}{\lang1024 
\par 13\tab Appendix A \endash  Sample Call Sequences\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459506 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 6      }}}{\fldrslt {\lang1024 23}}}{\lang1024 
\par }\pard\plain \s19\li200\nowidctlpar\widctlpar\tx800\tqr\tldot\tx8640\adjustright \scaps\fs20\cgrid {\lang1024 13.1\tab UDP Unicast Sender, Bound Using INADDR_ANY\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459507 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 7      }}}{\fldrslt {\lang1024 23}}}{\lang1024 
\par 13.2\tab UDP Unicast Sender Bound to a Specific Address\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459508 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 8      }}}{\fldrslt {\lang1024 23}}}{\lang1024 
\par 13.3\tab UDP Unicast Sender, QoS Parameters Modified\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459509 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 0 9      }}}{\fldrslt {\lang1024 24}}}{\lang1024 
\par 13.4\tab UDP Multicast Sender, QoS Parameters in WSAIoctl\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459510 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 0      }}}{\fldrslt {\lang1024 24}}}{\lang1024 
\par 13.5\tab TCP Unicast Sender, QoS Parameters Included With ConditionFunc\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459511 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 1      }}}{\fldrslt {\lang1024 25}}}{\lang1024 
\par 13.6\tab TCP Unicast Sender, WSAAccept Followed by WSAIoctl\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459512 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 2      }}}{\fldrslt {\lang1024 25}}}{\lang1024 
\par 13.7\tab TCP Unicast Sender, WSAIoctl Precedes WSAAccept\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459513 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 3      }}}{\fldrslt {\lang1024 26}}}{\lang1024 
\par 13.8\tab TCP Unicast Sender, Active Sender\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459514 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 4      }}}{\fldrslt {\lang1024 26}}}{\lang1024 
\par 13.9\tab UDP Receiver, Bound to INADDR_ANY, Followed by WSAConnect\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459515 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 5      }}}{\fldrslt {\lang1024 26}}}{\lang1024 
\par }\pard \s19\li200\nowidctlpar\widctlpar\tx1000\tqr\tldot\tx8640\adjustright {\lang1024 13.10\tab UDP Receiver, Bound to Specific Address, Followed by WSAIoctl\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459516 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 6      }}}{\fldrslt {\lang1024 27}}}{\lang1024 
\par 13.11\tab UDP Receiver, WSAIoctl Followed by WSAConnect\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459517 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 7      }}}{\fldrslt {\lang1024 27}}}{\lang1024 
\par 13.12\tab Multicast UDP Receiver, WSAIoctl Followed by WSAJoinLeaf\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459518 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 8      }}}{\fldrslt {\lang1024 28}}}{\lang1024 
\par 13.13\tab Multicast UDP Receiver, QoS Parameters in WSAJoinLeaf\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459519 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 1 9      }}}{\fldrslt {\lang1024 28}}}{\lang1024 
\par 13.14\tab Unicast TCP Receiver, Active Receiver\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459520 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 2 0      }}}{\fldrslt {\lang1024 28}}}{\lang1024 
\par 13.15\tab Unicast TCP Receiver, Passive Receiver\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459521 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 2 1      }}}{\fldrslt {\lang1024 28}}}{\lang1024 
\par }\pard\plain \s18\sb120\sa120\nowidctlpar\widctlpar\tx600\tqr\tldot\tx8640\adjustright \b\caps\fs20\cgrid {\lang1024 14\tab Bibliography\tab }{\field{\*\fldinst {\lang1024  PAGEREF _Toc384459522 \\h }{\lang1024 {\*\datafield \bin60 ÐÉêyùºÎŒ‚ ª K©         _ T o c 3 8 4 4 5 9 5 2 2      }}}{\fldrslt {\lang1024 29}}}{\lang1024 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid }}\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {\b\f5\fs28 \sect }\sectd \linex0\endnhere\sectdefaultcl {\*\bkmkstart _Ref367170029}{\*\bkmkstart _Toc384459447}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 1\tab}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Overview{\*\bkmkend _Ref367170029}{\*\bkmkend _Toc384459447}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This document discusses the mapping of the existing Winsock2 QoS related APIs to underlying QoS enabled service providers. Two underlying QoS service providers are under consideration. These are the RSVP Service Provider (RSVP SP) and the Traffic Control Service Provider (TCSP).  This document addresses the RSVP SP.
\par 
\par The RSVP SP provides a resource reservation protocol which negotiates with a network to satisfy QoS requests from applications. The RSVP SP also configures kernel traffic control components in compliance with the QoS negotiated with the network.
\par 
\par The TCSP allows applications to configure kernel traffic control components directly, with no resource reservation protocol involved. The TCSP will be discussed in a separate document.
\par {\*\bkmkstart _Toc384459448}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 2\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Generic QoS vs. Annexes{\*\bkmkend _Toc384459448}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This document addresses the }{\i generic }{QoS interfaces to the RSVP SP. These are standard Winsock2 API calls, which carry QoS related parameters, in a general form.  There are also specific API sets defined for the RSVP SP and for the TCSP.  From here on, we distinguish the standard Winsock2 QoS APIs, from the specific API sets, by referring to the former as the }{\i Generic QoS API (GQoS)}{, and the latter, as }{\i annexes}{. 
\par 
\par It is expected that the majority of applications requiring QoS support will be modified to use GQoS. Designing applications to this interface has the benefit of enabling the application to invoke QoS from any QoS service provider, transparently, whereas the annexes are specific to particular QoS service providers.
\par The annexes provide interfaces by which applications can exercise close control over specific features of a particular QoS service provider. The annexes also enable }{\i third party }{applications. These are applications which are able to request QoS on behalf of another application which is not QoS aware.
\par 
\par The QoS service providers support both the GQoS interfaces and the annex interfaces specific to the provider. However, any single application is expected to invoke the service provider\rquote s functionality through one set of interfaces or the other.
\par {\*\bkmkstart _Toc384459449}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 3\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {General Strategy for Mapping GQoS to RSVP{\*\bkmkend _Toc384459449}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In mapping GQoS to RSVP, we will first review the required RSVP functionality and parameters and then show how Winsock2 GQoS calls can be used to invoke this functionality and provide the required parameters.
\par {\*\bkmkstart _Toc384459450}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 3.1\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {RSVP Functionality{\*\bkmkend _Toc384459450} 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In simple terms, relevant RSVP functionality on a host amounts to the exchange of }{\i PATH }{and }{\i RESV }{messages with the network. 
\par 
\par An application intending to transmit traffic with a certain QoS must indicate so to RSVP. In turn, RSVP should respond by beginning the periodic transmission of }{\i PATH }{messages on the network. }{\i PATH }{messages describe the QoS parameters of the traffic to be sent (}{\i Tspec}{), the sender\rquote s address (}{\i SenderTemplate}{) and the destination of the traffic (}{\i session}{).
\par 
\par An application wishing to receive traffic with a certain QoS must indicate so to RSVP. In turn, RSVP should respond by beginning the periodic transmission of }{\i RESV }{messages on the network. }{\i RESV }{messages describe the QoS parameters of the traffic to be received (}{\i flowspec}{), the source(s) from which QoS traffic is to be received (}{\i filterspec}{) and the destination of the traffic (}{\i session}{).
\par {\*\bkmkstart _Toc384459451}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 3.2\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Using Winsock2 APIs to Invoke RSVP Functionality{\*\bkmkend _Toc384459451}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The key to mapping Winsock2 calls to RSVP is to determine when to trigger the transmission of }{\i PATH }{and/or }{\i RESV }{messages by the RSVP SP, and when to stop their transmission.  In general, the transmission of these messages should begin at the time that the RSVP SP has determined that the application intends to invoke QoS in a specific direction (sending or receiving) }{\i and }{all information required for the generation of the messages, is available.
\par {\*\bkmkstart _Toc384459452}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 3.2.1\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {QoS Related Calls{\*\bkmkend _Toc384459452}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The following Winsock2 calls provide a mechanism by which applications can specify QoS parameters of sent and received traffic. These parameters are specified in the }{\i SendingFlowspec }{and }{\i ReceivingFlowspec }{structures (within the }{\i QOS }{structure) which may be included with these calls:
\par 
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\b WSAConnect}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\b WSAJoinLeaf}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {The condition function callback (}{\i lpfnCondition}{) to }{\b WSAAccept}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\b WSAIoctl }{(}{\i SIO_SET_QOS, SIO_GET_QOS}{)
\par {\*\bkmkstart _Toc384459453}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 3.2.2\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Implicit Invocation of QoS{\*\bkmkend _Toc384459453}
\par }\pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {The RSVP SP assumes that an application which includes a  non-NULL pointer to a }{\i QOS }{structure, with any of the calls above, is implicitly invoking QoS functionality. The QoS structure includes a }{\i SendingFlowspec }{and  a }{\i ReceivingFlowspec.}{ Within each }{\i Flowspec}{ there is a }{\i ServiceType }{field. QoS functionality will be invoked if the }{\i ServiceType }{field in the corresponding direction specifies a value other than }{\i\fs16 SERVICETYPE_BESTEFFORT}{\i  }{or }{\i\fs16 SERVICETYPE_NOTRAFFIC}{. The specification of either of these values in one of the }{\i Flowspecs }{will suppress QoS functionality in the corresponding direction. 
\par 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Each of the QoS related  calls specify a particular socket to which the call applies. Thus, QoS is invoked relative to a particular socket. A socket on which QoS has been invoked, is said to be a }{\i QoS Socket}{.
\par {\*\bkmkstart _Toc384459454}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 3.2.3\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Information Required to Generate }{\i PATH }{and }{\i RESV }{Messages{\*\bkmkend _Toc384459454}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The following information is required to begin the transmission of }{\i PATH }{messages:
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3460\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7812\pard \nowidctlpar\widctlpar\intbl\adjustright {\b RSVP Parameter}{\i \cell }{\b Derived from the following Winsock parameter}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3460\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7812\pard \nowidctlpar\widctlpar\intbl\adjustright {Sender }{\i Tspec }{(QoS parameters of sent traffic)\cell }{\i SendingFlowspec}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i SenderTemplate }{(sender\rquote s address)}{\i \cell }{source IP address and port that sending socket is bound to\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3460\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7812\pard \nowidctlpar\widctlpar\intbl\adjustright {\i Session }{(destination of sent traffic)}{\i \cell }{destination IP address, port and protocol ID that socket is sending to (sockaddr_in)}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ Note that the RSVP }{\i session }{includes specification of the protocol ID (e.g. UDP, TCP, etc). The protocol ID is determined by the type of socket for which QoS is being invoked. In the remainder of this document, we do not discuss the protocol ID.}}}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\adjustright {
\par The following information is required to begin the transmission of }{\i RESV }{messages:
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3460\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7812\pard \nowidctlpar\widctlpar\intbl\adjustright {\b RSVP Parameter}{\i \cell }{\b Derived from the following Winsock parameter}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3460\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7812\pard \nowidctlpar\widctlpar\intbl\adjustright {\i flowspec}{ (QoS parameters of  traffic to be received)\cell }{\i ReceivingFlowspec}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i filterspec}{ (source(s) from which QoS traffic will be received)}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ Strictly speaking, }{\i RESV }{messages can be generated without knowledge of the sender\rquote s address. These type of }{\i RESV }{messages are said to be WF style, meaning that they apply to all senders to the session.}}}{\i \cell }{address(es) of peer(s) from which the socket is receiving\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3460\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7812\pard \nowidctlpar\widctlpar\intbl\adjustright {\i Session }{(destination of sent traffic)}{\i \cell }{local IP address and port to which the receiving socket is bound (unicast), or multicast session address on which the socket is a leaf (multicast)\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459455}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 3.2.4\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Triggering the Transmission of }{\i PATH }{and }{\i RESV }{Messages{\*\bkmkend _Toc384459455}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {We see that, upon being called through any of the QoS related calls listed above (with a }{\i SendingFlowspec }{and/or a }{\i ReceivingFlowspec}{), the RSVP SP can assume that the application is invoking QoS and obtains at least, the QoS parameters describing the traffic to be sent and/or received. Depending on the state of the relevant QoS socket at the time the call is invoked, the RSVP SP may or may not have the additional parameters describing the source(s) and destination(s) of the QoS traffic. 
\par 
\par In general, the address of the local host (the source address in the case that the application resides on the sending host, or the destination address in the case that the application resides on the receiving host) is available only after the socket has been }{\i bound}{ by use of the Winsock2 }{\b bind }{call. Alternatively,  the socket may be bound implicitly as a result of a call to }{\b WSAConnect }{or }{\b WSAJoinLeaf}{. See the subsequent section on binding.
\par 
\par In general, the address of the peer (the source address in the case that the application resides on the receiving host, or the destination address in the case that the application resides on the sending host) is available following  one of the connection oriented calls (}{\b WSAConnect}{, }{\b WSAJoinLeaf}{, }{\b WSAAccept}{), but not necessarily following the }{\b WSAIoctl }{call. 
\par 
\par Consequently, the RSVP SP typically begins sending }{\i PATH }{and/or }{\i RESV }{messages only after an application has called one of the connection oriented calls, and the socket is unambiguously bound to a local address. However there are cases in which the RSVP SP can begin sending }{\i PATH }{and/or }{\i RESV }{ messages, even in the absence of one of the connection oriented calls described. In subsequent  sections we will discuss this sequence of events as it occurs in different cases, and the requirements imposed on applications.
\par {\*\bkmkstart _Toc384459456}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 3.3\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Responses/Notifications From RSVP to Applications{\*\bkmkend _Toc384459456}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {RSVP will provide the following indications to applications using the GQoS interface:
\par 
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Information regarding the acceptance or rejection of the application\rquote s QoS requests by the RSVP module or by the network. Note that rejection of a QoS request may indicate a transient failure, which will be corrected at a later time.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Significant changes in the QoS provided by the network (as compared to a previously negotiated QoS).
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Status regarding the preparedness of a QoS peer to send or receive a particular QoS traffic flow.
\par }\pard \nowidctlpar\widctlpar\adjustright {
\par These indications are mediated via status returned to Winsock2 calls, or via FD_QOS asynchronous event notifications.
\par {\*\bkmkstart _Toc384459457}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 4\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {General Concepts{\*\bkmkend _Toc384459457}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Before delving into the detailed mapping of GQoS to RSVP, it is helpful to introduce some general concepts.
\par {\*\bkmkstart _Toc384459458}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.1\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {RSVP as a Service Provider{\*\bkmkend _Toc384459458} 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {RSVP functionality is implemented in a Winsock2 service provider. It may be implemented as part of a base service provider or as a layered service provider which is layered over a base service provider. In either case, it intercepts and acts upon Winsock API calls from an application to a transport service provider. Throughout this document, we will refer to the RSVP Service Provider (RSVP SP), recognizing that it may be an integral part of a base transport service provider.  
\par 
\par An application may use the GQoS interface to the RSVP SP, to invoke QoS on its own behalf. Alternatively, third party applications may invoke QoS on behalf of another application\rquote s traffic flows, by using the RSVP annex  interface. In this case, the third party application will  have to learn the addresses and ports used by the application for which it is invoking QoS. It is assumed that some out of band method is used for doing so, or that these are known a-priori.
\par {\*\bkmkstart _Toc384459459}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.2\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Binding{\*\bkmkend _Toc384459459}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In general, RSVP identifies packets associated with a particular traffic flow, by the source and destination IP addresses and ports included in the packets.  Consequently, it is necessary for RSVP to learn the local and remote addresses and port numbers associated with each QoS socket.  The local address and port associated with a socket are defined by  either implicit or explicit  }{\i binding }{of the socket.  These are used by RSVP to compose the }{\i SenderTemplate }{on a sender, and the }{\i session }{on a receiver}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ Actually, for receiving sockets, the }{\i session }{indicated in }{\i RESV }{messages is determined by matching }{\i PATH }{state with local address and port parameters. See section titled }{\i Sending RESV Messages Based on Matching PATH State}{.}}}{.
\par 
\par Applications typically invoke the Winsock }{\b bind }{call to explicitly associate a local address and port with a socket. In general, an application may call }{\b bind }{without explicitly specifying an IP address or port or, in certain cases, may not call }{\b bind }{at all. When a socket is not explicitly bound by an application, the underlying transport service provider will automatically bind the socket to a specific port. The RSVP SP (and applications using RSVP), can readily determine the port bound, by issuing a }{\b getsockname }{call to the underlying transport service provider.  
\par 
\par For TCP sockets, the local address to which the socket is bound can also be unambiguously determined using }{\b getsockname}{. However, in the case of UDP sockets, certain implementations of the transport service provider reserve the right to change the sending interface (and the address included in the source address field of sent packet headers), based on routing information. Because of this, calls to }{\b getsockname }{on UDP sockets are not guaranteed to return a bound address. 
\par 
\par This presents a problem, primarily in the case of sending sockets, for which RSVP is required to compose a }{\i SenderTemplate }{object which matches the source address and interface on which the socket\rquote s QoS data is transmitted. To address this problem, applications using the GQoS interfaces to the RSVP SP may use one of the approaches described below. Note that these approaches apply both in the case of unicast and multicast RSVP }{\i session}{s. Also note that these are used for UDP sockets only. For TCP sockets, the RSVP SP can call }{\b getsockname }{to determine the local bound address.
\par {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.2.1\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {Binding Using }{\i INADDR_ANY
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The application may bind using }{\i INADDR_ANY. }{ In this case, the RSVP SP will use the interface query Ioctl, }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{), to determine which source address to use when composing the }{\i SenderTemplate. }{To do so, the RSVP SP waits until the application calls }{\b WSAConnect}{ or }{\b WSAJoinLeaf}{. At that time, the RSVP SP issues the interface query Ioctl, providing the peer address specified in the connection oriented call. The RSVP SP composes the }{\i SenderTemplate }{based on the address returned in response, from the underlying transport service provider. The RSVP SP registers for routing change notifications via the }{\i FD_ROUTING_CHANGE }{event, or by calling }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_CHANGE}{). This assures that it will be notified in the case of routing changes and is able to modify the }{\i SenderTemplate }{accordingly. 
\par 
\par In this mode, the application remains unaware of the sending interface used and of routing changes. Calls to }{\b getsockname }{are not guaranteed to return a valid address. In addition, the address included in the source address field of transmitted packets, is subject to change as a result of routing changes. Although the RSVP SP will respond by correcting the }{\i SenderTemplate }{in transmitted }{\i PATH }{messages, the application will receive no indication of the change.
\par {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.2.2\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {Binding a Specific Address Based on an Interface Query
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {For details regarding the usage of the interface query Ioctl and the associated change notification mechanisms, see the subsequent section in this document and/or the references in the }{\i Windows Sockets 2 Application Programming Interface }{(revision 2.2.1).
\par 
\par In this case, the application assumes full responsibility for binding to a specific address. The application may use the interface query Ioctl to determine the address to which it should bind, based on the destination address to which it will be sending. Once it has determined the correct address to bind, it issues a }{\b bind }{call, specifying the address. The RSVP SP will either monitor }{\b bind }{calls issued by the application, or issue }{\b getsockname }{calls to the underlying transport service provider, in order to determine the address to be used in the }{\i SenderTemplate}{. 
\par 
\par }\pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {For resilience in the unlikely event of a routing change, applications using this method on multi-homed hosts, may register for routing change notifications via the }{\i FD_ROUTING_CHANGE }{event or by calling }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_CHANGE}{). Note that when an application binds explicitly, route changes will result in data being sent from a new interface, but will not cause a change in the source address used in datagram headers. Since the source address will not change, the }{\i SenderTemplate }{is not required to change. Therefore, strictly speaking, applications are not required to react to routing changes. There may be an intermittent disruption in RSVP service, however, due to the soft state maintained by RSVP, the network will eventually respond to the routing change, transparently. 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {By binding to specific addresses and tracking routing changes, the application can be fully aware of the sending interface used at any time. 
\par {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.2.3\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {No Bind by Application
\par }\pard\plain \s37\nowidctlpar\widctlpar\adjustright \f4\fs20\cgrid {It is allowable for an application not to bind a socket at all.  This case is handled by the RSVP SP, as a variation on the case of a bind using }{\i INADDR_ANY. }{From the perspective of }{\i PATH}{ message generation, the cases are identical; The RSVP SP issues the interface query ioctl (following one of the connection oriented calls) and monitors routing changes in order to maintain the correct }{\i SenderTemplate. }{. }{\f0  From the perspective of }{\i\f0 RESV }{message generation, unbound sockets provide no criteria by which the RSVP SP can search for matching }{\i PATH }{state. Consequently, no }{\i RESV }{messages will be sent on behalf of these sockets until they are bound, either explicitly, by the application, or implicitly, by the transport provider, following one of the connection oriented calls listed above. 
\par 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Note that per standard Winsock protocol, applications calling }{\b WSAAccept }{must call }{\b bind }{first.
\par {\*\bkmkstart _Toc384459460}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.3\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {WSAIoctl(}{\i SIO_LOCAL_INTERFACE_QUERY}{) and Change Notifications{\*\bkmkend _Toc384459460}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The interface query ioctl takes a unicast or multicast destination address as input. It returns the address of the interface which will be used by the transport provider, to send packets to the receiving peer. 
\par 
\par The ioctl is guaranteed to return the correct interface for both unicast and multicast addresses. The interface returned in response to unicast queries is based on routing information. Routing information is not necessarily available for multicast addresses. Therefore, while the interface returned in response to multicast queries }{\i is}{ the interface that will be used, this interface may have been chosen arbitrarily. Applications which require control over the choice of multicast interface used, should explicitly set the multicast interface by calling }{\b setsockopt}{(}{\i IP_MULTICAST_IF}{).
\par 
\par Note that, on hosts acting as multicast gateways, an interface query on a multicast address may return a list of interfaces. QoS applications of the type described here are not expected to run directly on multicast gateways.
\par {\*\bkmkstart _Toc384459461}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.4\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Port Number Negotiation{\*\bkmkend _Toc384459461}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {It is assumed that there is some application specific mechanism to allow peers to negotiate port numbers (or that they are implied by the application, such as in the case of FTP). Methods for negotiation of port numbers is beyond the scope of this document. 
\par {\*\bkmkstart _Toc384459462}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.5\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {WSAIoctl (}{\i SIO_SET_QOS}{){\*\bkmkend _Toc384459462}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This call can be invoked by an application, at any time to change (or initialize) the QoS parameters on a socket. The RSVP SP will respond differently depending on the state of the socket. Use of }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) will be discussed in further detail, in subsequent sections.
\par {\*\bkmkstart _Toc384459463}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.6\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Sending }{\i RESV }{Messages Based on Matching PATH State{\*\bkmkend _Toc384459463}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {When a }{\i PATH }{message is received, the RSVP SP creates an RSVP }{\i session}{ and associates }{\i PATH }{state with it. The RSVP SP will also create a }{\i session}{ (in the absence of }{\i PATH }{messages) when QoS is indicated on any receive socket. (However, in this case, }{\i PATH }{state is not associated with the }{\i session }{until a corresponding }{\i PATH }{message is received.) 
\par 
\par The RSVP SP will generally send }{\i RESV }{messages when it determines that }{\i PATH }{state exists for a }{\i session }{which matches a socket for which receive QoS is indicated. As a result, the transmission of }{\i RESV }{messages may be triggered either by the receipt of a }{\i PATH }{message (which matches the }{\i session}{ associated with a pre-existing socket), or by the creation of a socket (which matches the }{\i session}{ associated with pre-existing }{\i PATH }{state). The following rules are used to determine whether a match exists between }{\i session}{s with associated }{\i PATH }{state and sockets for which receive QoS is indicated.
\par {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.6.1\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {TCP Sessions
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this case, matches are readily determined. TCP sockets, once they are connected, are associated with specific source and destination addresses and ports. 
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\b TCP Sockets:}{\cell }{\b will match:}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {Not bound, or bound and not connected (}{\b WSAConnect}{ not issued)\cell never\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {Bound and connected \cell if port and address specified in any }{\i session }{matches the socket\rquote s bound port and address }{\i and SenderTemplate}{ (specified in }{\i PATH }{state associated with the }{\i session}{) matches connected peer\rquote s port and address\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.6.2\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {UDP Sessions
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {UDP sessions are subject to less stringent matching rules, since it is not always possible to determine unique addresses associated with a UDP socket.  The rules are tabulated separately for unicast vs. multicast.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\b Unicast UDP Sockets:}{\cell }{\b will match:}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {Not bound and not connected\cell never\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Bound using }{\i INADDR_ANY, }{and not connected (}{\b WSAConnect}{ not issued)\cell if port specified in any }{\i session}{ matches the socket\rquote s bound port.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Bound using a specific address and not connected \cell if port and address specified in any }{\i session }{matches the socket\rquote s bound port and address.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Bound using }{\i INADDR_ANY}{, and connected\cell if port specified in any }{\i session }{matches the socket\rquote s bound port }{\i and}{ }{\i SenderTemplate }{(specified in }{\i PATH }{state associated with the }{\i session}{) matches the connected peer\rquote s port and address.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {Bound using a specific address and connected\cell if port and address specified in any }{\i session}{ matches the socket\rquote s bound port and address }{\i and SenderTemplate }{(specified in }{\i PATH }{state associated with the }{\i session}{) matches the connected peer\rquote s port and address.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\adjustright {
\par In the case of multicast sockets, the application is expected to create the socket using }{\b WSASocket}{, setting the appropriate flags to indicate that it is a multicast sender (or receiver). Otherwise, the RSVP SP may be unable to determine that the socket is multicast and may send undesired }{\i RESV }{messages based on the unicast matching rules described above.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\b Multicast UDP Sockets:}{\cell }{\b will match:}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {Not joined to a specific multicast group (}{\b WSAJoinLeaf}{ not issued).\cell never\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {Joind to a specific multicast group (using }{\b WSAJoinLeaf}{) \cell if multicast port and address specified in any }{\i session }{matches the multicast port and address specified in the }{\b WSAJoinLeaf }{call.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459464}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.7\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {QoS for Transmitted Data Contingent on RESV{\*\bkmkend _Toc384459464}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The RSVP SP typically will not activate traffic control on behalf of a sending application\rquote s flow unless there is }{\i RESV }{state for the flow (}{\i RESV }{messages are arriving). Until such time, sent traffic will be treated by the local network components and by the network at large, as best-effort traffic. Senders may register for notification that }{\i RESV }{state has been established, by using }{\b WSAEventSelect }{(}{\i FD_QOS}{). 
\par 
\par In general, the default behaviour of any QoS service provider, is to delay activation of traffic control until there is an indication from the network that there exists at least one listener. Applications may override this behaviour by setting the }{\i\fs16 SERVICE_IMMEDIATE_TRAFFIC_CONTROL}{\i  }{bit in the }{\i ServiceType }{parameter of the }{\i SendingFlowspec}{.  This will cause the QoS service provider to immediately invoke sending traffic control per the parameters in the }{\i SendingFlowspec}{. 
\par {\*\bkmkstart _Toc384459465}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.8\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {GQoS and IP{\*\bkmkend _Toc384459465}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Although RSVP and GQoS are supposed to be protocol independent, the reality is that they assume the IP protocol. Nonetheless, efforts were made to assure that the GQoS specification is as independent of a specific protocol as practically realizable.
\par {\*\bkmkstart _Toc384459466}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 4.1.9\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Use of }{\b WSAJoinLeaf}{ and }{\b sendto }{for Multicast Sessions{\*\bkmkend _Toc384459466}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {To invoke QoS service, applications are required to use the }{\b WSAJoinLeaf }{call both to send and receive multicast traffic. Alternate multicast semantics, such as simply calling }{\b sendto}{ with a multicast address (for transmit) or using }{\i IP_ADD_MEMBERSHIP}{ (for receive), will not invoke QoS service.
\par 
\par Applications are required to set the }{\i dwFlags }{parameter to }{\i JL_SENDER_ONLY, JL_RECEIVER_ONLY }{or }{\i JL_BOTH}{, to indicate the direction in which QoS service is requested.
\par 
\par Note that senders that have joined multicast sessions using }{\b WSAJoinLeaf }{are required to call }{\b sendto}{ or }{\b WSASendTo }{with the correct mutlicast session address in order to send data to the multicast session (even though the multicast session address was already provided with the call to }{\b WSAJoinLeaf}{). The RSVP SP on a sender, generates the }{\i SenderTemplate }{based on the multicast session address specified in the call to }{\b WSAJoinLeaf}{. Therefore, if the sending application calls }{\b sendto }{or }{\b WSASendTo }{specifying a multicast session address other than the one specified with the }{\b WSAJoinLeaf}{, it will not receive QoS service for the data sent.
\par 
\par Also, note that the }{\i only }{case in which a QoS application should call }{\b sendto }{or }{\b WSASendTo}{, is the case of a multicast sender. For unicast UDP or TCP senders, the destination address must be specified using }{\b WSAConnect }{and it is sufficient for the application to call }{\b send}{ or }{\b WSASend}{, rather than }{\b sendto}{ or }{\b WSASendTo}{.
\par {\*\bkmkstart _Toc384459467}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 5\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Detailed Mapping of GQoS to RSVP \endash  Call Sequences{\*\bkmkend _Toc384459467}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Applications must issue a sequence of QoS related calls to invoke QoS functionality from the RSVP SP. The sequence may vary depending on the type of communication (UDP vs. TCP, unicast vs. Multicast, etc.) and on the specific application. In this section, we discuss these call sequences. For a list of sample call sequences, see }{\i Appendix A \endash  Sample Call Sequences.
\par }{
\par In the following discussion, we discuss }{\i sending applications}{ separately from }{\i receiving applications}{, for the sake of simplicity.  For the purpose of this discussion, applications are classified as sending or receiving, based on their QoS requirements. Most applications do not exclusively send or receive, however \endash  many applications may be interested in }{\i QoS service}{ only for traffic sent or only for traffic received. }{\i  }{This is the case for }{\i playback}{ applications such as video and audio servers, in which the server sends QoS traffic and the receiver receives QoS traffic. For other types of applications, such as conferencing, the application may be interested in QoS service both for traffic sent and for traffic received. In this case, the sequences described below can be combined.
\par {\*\bkmkstart _Toc384459468}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 5.1\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Sending Applications{\*\bkmkend _Toc384459468}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Sending applications must provide the RSVP SP with the following information in order to invoke RSVP processing:
\par 
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls10\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls10\adjustright {Peer (destination) address, for the composition of RSVP }{\i session}{ objects.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls10\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls10\adjustright {Local (source) address, for the composition of the RSVP }{\i SenderTemplate }{objects.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls10\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls10\adjustright {QoS parameters, in a }{\i SendingFlowspec}{, for the generation of Tspec objects.
\par }\pard \nowidctlpar\widctlpar\adjustright {
\par }\pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {Once this information is available to the RSVP SP, it begins to transmit RSVP }{\i PATH }{messages on behalf of the application.
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {
\par The following table summarizes how the RSVP SP obtains the information for }{\i session }{and }{\i SenderTemplate}{, for various cases of sending applications.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx1818\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx5234\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\b\fs16 Case}{\fs16 \cell }{\i\fs16 Session}{\fs16 \cell }{\b\i\fs16 SenderTemplate\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b\i\fs16 \row }\trowd \trgaph108\trleft-108\trkeep\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx1818\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx5234\clvmgf\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 UDP unicast sender\cell Destination address and port specified in }{\b\fs16 WSAConnect }{\b\i\fs16 name }{\fs16 field\cell {\pntext\pard\plain\intbl\f3\fs16\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\intbl\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls11\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls11\adjustright {\fs16 Local port determined by RSVP SP call to }{\b\fs16 getsockname
\par {\pntext\pard\plain\intbl\f3\fs16\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\intbl\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls11\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls11\adjustright {\fs16 For sockets bound explicitly by the application, to a specific address, the RSVP SP calls }{\b\fs16 getsockname}{\fs16  to get the local address.}{\b\fs16 
\par {\pntext\pard\plain\intbl\f3\fs16\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\intbl\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls11\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls11\adjustright {\fs16 For sockets bound by the application to }{\i\fs16 INADDR_ANY}{\fs16 , the RSVP SP gets the local address by issuing an interface query on the destination address (as obtained from the application\rquote s call to }{\b\fs16 WSAConnect}{\fs16  or }{\b\fs16 WSAJoinLeaf}{\fs16 ).}{\b\fs16 \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 \row }\trowd \trgaph108\trleft-108\trkeep\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx1818\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx5234\clvmrg\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 UDP multicast sender\cell multicast IP address and port as specified in }{\b\fs16 WSAJoinLeaf}{\fs16  }{\i\fs16 name}{\fs16  field\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx1818\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx5234\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 TCP unicast sender \cell Peer (destination) address and port as determined by call to }{\b\fs16 getpeername }{\fs16 following connection establishment.\cell Local address and local port determined by call to }{\b\fs16 getsockname}{\fs16  following connection establishment.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 \row }\pard \nowidctlpar\widctlpar\adjustright {
\par The RSVP SP obtains QoS parameters from a }{\i SendingFlowspec}{ which is included either in the application\rquote s call to }{\b WSAConnect }{or }{\b WSAJoinLeaf}{, or provided separately in a call to }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{).
\par {\*\bkmkstart _Toc384459469}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 5.1.1\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Unicast UDP Senders{\*\bkmkend _Toc384459469}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Unicast UDP senders will typically call }{\b WSAConnect }{to invoke RSVP functionality. This call provides the peer address to the RSVP SP and may also provide QoS parameters. The RSVP SP uses the address passed, to directly generate the }{\i Session }{object included in }{\i PATH }{messages. For sockets that have been bound using }{\i INADDR_ANY}{, the RSVP SP uses the peer address to determine the local address to be used in the }{\i SenderTemplate }{object.  It does so by issuing an interface query, to the underlying transport service provider. This returns the address of the local interface, which should be used to reach the peer specified. 
\par 
\par Typically, the call to }{\b WSAConnect }{will include sending QoS parameters. However, the sending application may use the }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to provide the sending QoS parameters to the RSVP SP before or after the call to }{\b WSAConnect}{. In all cases, RSVP processing will begin at the earliest time at which the RSVP SP knows the peer address (from which it may also determine the local bound address) and the sending QoS parameters.
\par {\*\bkmkstart _Toc384459470}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 5.1.2\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Multicast UDP Senders{\*\bkmkend _Toc384459470}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The previous discussion on unicast UDP senders applies to multicast UDP senders as well. The only difference between the two cases is that multicast UDP senders use the }{\b WSAJoinLeaf }{call, instead of the }{\b WSAConnect }{call used in the unicast case.  The }{\b WSAJoinLeaf }{call provides the destination multicast session address and may also be used to provide QoS parameters.  If QoS parameters are not provided with the call to }{\b WSAJoinLeaf}{, they must be provided separately, with a call to }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{). The multicast session address is used to compose the RSVP }{\i session }{object to be included in RSVP }{\i PATH }{messages.
\par 
\par Note that in the case that a sending multicast UDP socket is bound using }{\i INADDR_ANY}{, the RSVP SP will use the multicast session address to perform an interface query, just as it would in the unicast case. The RSVP SP will use the interface address returned from the interface query to compose the RSVP }{\i SenderTemplate}{ to be included in }{\i PATH }{messages}{\i . }{
\par {\*\bkmkstart _Toc384459471}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 5.1.3\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Unicast TCP Senders{\*\bkmkend _Toc384459471}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {For TCP }{\i session}{s, the active peer issues a }{\b WSAConnect }{and the passive peer issues a }{\b WSAAccept}{.  Typically, the passive peer is the sender, and the active peer is the receiver, although this is not necessarily the case.  In this section, we describe the passive peer, assuming that it is also the sender. For the case in which the active peer is the sender, the subsequent section on unicast receivers can be applied.
\par 
\par As the passive peer, the sending application calls }{\b WSAAccept}{. This call does return the connecting peer\rquote s address but does not carry QoS parameters. Instead, the application defines a call back function (}{\i ConditionFunc}{), which is called by the transport service provider when the active peer initiates a connection. The definition of }{\i ConditionFunc }{allows for QoS parameters to be passed to the application or for the application to pass QoS parameters back to the service provider. 
\par 
\par Therefore, passive TCP peers may provide QoS parameters to the RSVP SP with the completion of the }{\i ConditionFunc }{or, alternatively, using }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{).  The application may call }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to associate QoS parameters with a socket, at any time following the creation of the socket.}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ The RSVP SP will call the }{\i ConditionFunc }{with no }{\i ProviderSpecific }{buffer. Therefore, if the passive TCP application wishes to convey }{\i ProviderSpecific }{QoS parameters, it must call }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to do so.}}}{  RSVP sender processing will begin at the earliest time at which the RSVP SP knows the peer address, the address to which the socket is bound locally and the QoS parameters.
\par 
\par Note that in order to provide QoS parameters via the }{\i ConditionFunc}{, the application is required to complete the }{\i ConditionFunc }{with status }{\i CF_ACCEPT. }{In addition, if the application has previously associated QoS parameters with the socket by calling }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{), then completion of the }{\i ConditionFunc }{may cause modification of the QoS parameters unless the }{\i ServiceType }{parameters in the corresponding }{\i FLOWSPEC}{s are set to }{\i\fs16 SERVICETYPE_NOCHANGE}{\i .
\par }{
\par The RSVP SP can readily determine the connected peer\rquote s address by monitoring the application\rquote s call to }{\b WSAConnect }{or by calling }{\b getpeername}{, after the socket is connected.
\par 
\par Recall that, for TCP sockets, the RSVP SP can unambiguously determine the local address bound to the socket, by calling }{\b getsockname}{ at any time following the establishment of the connection. This address is used to compose the }{\i SenderTemplate}{ for inclusion in RSVP }{\i PATH }{messages. As a result, no interface query is required in the case of TCP connections, even if the application binds using }{\i INADDR_ANY}{.
\par {\*\bkmkstart _Toc384459472}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 5.2\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Receiving Applications{\*\bkmkend _Toc384459472}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Receiving applications must provide the RSVP SP with at least, the QoS parameters, in a }{\i ReceivingFlowspec }{ in order to invoke RSVP processing.  The application includes the }{\i ReceivingFlowspec}{ in a call to }{\b WSAConnect }{or }{\b WSAJoinLeaf}{, or separately, in a call to }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{).
\par 
\par }\pard\plain \s21\nowidctlpar\widctlpar\adjustright \fs20\cgrid {The RSVP SP must compose a }{\i session}{ object, and in certain cases, a }{\i filterspec }{(defining the senders from which QoS traffic is to be received) for inclusion in }{\i RESV }{messages. Generally, these are obtained from all matching }{\i PATH }{state. However, receiving applications may provide the following information to the RSVP SP in order to limit the }{\i PATH }{state matched:
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls10\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls10\adjustright {Peer  (source) address(es), to compose the RSVP }{\i filterspec}{, thereby limiting the RSVP senders for which }{\i RESV }{messages are sent.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls10\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls10\adjustright {Local (destination) address, to limit the RSVP }{\i sessions }{for which }{\i RESV }{messages are sent.
\par }\pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {
\par See the previous section titled }{\i Sending RESV Messages Based on Matching PATH State}{, for further details.
\par 
\par Once sufficient information is available to the RSVP SP, it begins to transmit RSVP }{\i RESV  }{messages on behalf of the application.
\par {\*\bkmkstart _Toc384459473}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 5.2.1\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Unicast UDP Receivers{\*\bkmkend _Toc384459473}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {UDP receiving applications may use either the }{\b WSAConnect }{call or the }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) call, to provide QoS parameters to the RSVP SP, indicating that they are interested in receiving QoS traffic. The }{\b WSAConnect }{call can be used to provide a peer address, in so selecting a specific sender.
\par 
\par If the application calls }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to indicate receiving QoS parameters, the RSVP SP will begin transmitting }{\i RESV }{messages for any matching }{\i PATH }{state (see the previous section titled }{\i Sending RESV Messages Based on Matching PATH State}{). Since the }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) call does not associate a peer address with the socket}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ Except in the case that the }{\i ProviderSpecific }{structure is used to specify a particular sender. Use of the }{\i ProviderSpecific }{structure is addressed later in the document}}}{, the socket will match }{\i PATH }{state regardless of  sender. The RSVP SP will transmit WF style }{\i RESV }{messages.
\par 
\par The }{\b WSAConnect }{call should be used if and only if the application is interested in receiving traffic from a single sender only}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ }{\b WSAConnect }{will cause traffic received from senders other than the one specified, to be discarded. To receive traffic from multiple senders, using }{\b WSAConnect}{, requires that a separate socket be created for each sender.}}}{. In this case, the RSVP SP will send }{\i RESV }{messages only when }{\i PATH }{state exists for the sender specified. It will use the peer address included, to compose FF style }{\i RESV }{messages, selecting the specified sender.  
\par 
\par Receiving applications may call both }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) and }{\b WSAConnect}{, and may do so in any order.  The RSVP SP will send }{\i RESV }{messages at the earliest indication of QoS parameters and the existence of matching }{\i PATH }{state. If }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) is called prior to }{\b WSAConnect}{, the RSVP SP will send WF style }{\i RESV }{messages (provided there is matching }{\i PATH }{state) initially and will send FF style }{\i RESV }{messages as soon as a peer is specified by }{\b WSAConnect}{ (provided that matching }{\i PATH }{state exists for the particular sender specified). 
\par 
\par Note that calling }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) after }{\b WSAConnect }{does not negate the selection of a specific sender. Thus, although }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) may be called after }{\b WSAConnect }{to alter the QoS parameters indicated in the }{\i RESV }{messages (or to terminate the transmission of }{\i RESV }{messages}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ By specifying }{\i BestEffort }{service.}}}{), it will not cause the RSVP SP to send WF style }{\i RESV }{messages. 
\par 
\par Also note that calling }{\b WSAConnect }{may actually cause the RSVP SP to cease sending }{\i RESV }{messages triggered by a previous call to }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{), since }{\i PATH }{state may have existed for some sender, but not for the particular sender specified. 
\par {\*\bkmkstart _Toc384459474}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 5.2.2\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Multicast UDP Receivers{\*\bkmkend _Toc384459474}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Multicast receive applications are expected to create UDP sockets using }{\b WASocket }{and to indicate in the accompanying flags that they are multicast receivers. Such applications are required to call }{\b WSAJoinLeaf}{  to indicate the multicast session which they are interested in joining. QoS parameters may be indicated either with the call to }{\b WSAJoinLeaf}{ or separately, using }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{).
\par 
\par Unlike the unicast case, the RSVP SP will not send }{\i RESV }{messages for multicast sessions until a multicast session address is unambiguously specified in a call to }{\b WSAJoinLeaf}{. The RSVP SP makes no use of the parameters with which the multicast socket is bound. Also, since no peer is specified, the RSVP SP makes no assumptions about specific senders. Consequently, }{\i RESV }{messages sent on behalf of multicast receivers, are by default WF style}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ Applications may use the }{\i ProviderSpecific }{fields of the QoS structure to specify particular senders, thereby causing the RSVP SP to send FF or SE style }{\i RESV }{messages.}}}{.
\par 
\par Receiving applications may call both }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) and }{\b WSAJoinLeaf}{, and may do so in any order.  The RSVP SP will send }{\i RESV }{messages at the earliest indication of QoS parameters and the existence of matching }{\i PATH }{state. However, note that in the multicast case, matching }{\i PATH }{state will only be found if a multicast socket has been created with a matching multicast session address. 
\par 
\par The RSVP SP does not preclude a receiving application from joining multiple multicast groups on a single socket. In this case, the RSVP SP will send }{\i RESV }{messages for all groups for which there is matching }{\i PATH }{state. Unless }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) is called, QoS parameters will be obtained separately, from the }{\i ReceivingFlowspec}{s}{\i  }{included with the }{\b WSAJoinLeaf }{calls for each multicast group. If }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) is called, the QoS parameters included will be applied to all multicast groups joined.
\par {\*\bkmkstart _Toc384459475}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 5.2.3\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Unicast TCP Receivers{\*\bkmkend _Toc384459475}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Typically, the TCP receiver is the active peer in a TCP connection. As such, receiving TCP applications are expected to use }{\b WSAConnect}{ to initiate a connection to the sender. Rules for invoking RSVP processing from the RSVP SP are similar to those, which apply in the unicast UDP sender case. Specifically, the receiving application must use }{\b WSAConnect }{to specify the peer sender\rquote s address. The RSVP SP uses this address directly to compose the }{\i filterspec }{for FF style }{\i RESV }{messages. 
\par 
\par Typically, the call to }{\b WSAConnect }{will include receiving QoS parameters. However, the receiving application may use the }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to provide the receiving QoS parameters to the RSVP SP before or after the call to }{\b WSAConnect}{. In all cases, the RSVP SP will begin RSVP processing at the earliest time at which it knows the receiving QoS parameters }{\i and }{there is matching }{\i PATH }{state. In the case of TCP receivers, }{\i PATH }{state will match only if the }{\i session }{address and the }{\i SenderTemplate }{match the bound address and the peer address, respectively, which are associated with the socket. 
\par 
\par In case the receiving socket is bound using }{\i INADDR_ANY}{, the bound address cannot be determined until }{\b WSAConnect }{is called. If the receiving socket is bound with a specific address, the bound address can be determined earlier. However, the peer address remains unknown such that it is impossible to match }{\i PATH }{state and the transmission of }{\i RESV }{messages will still be delayed. Following connection establishment, the RSVP SP calls }{\b getpeername }{ to determine the peer address. At that time sufficient information is available to generate }{\i RESV }{messages.
\par {\*\bkmkstart _Toc384459476}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 5.3\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Use of WSAIoctl}{\b0 (SIO_SET_QOS){\*\bkmkend _Toc384459476}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the previous paragraphs, we discussed the use of  }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) in conjunction with the various QoS connection oriented calls. Typically, the connection oriented calls will be used both to indicate the QoS parameters and address parameters to the RSVP SP and the call to }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) is not required. 
\par 
\par One exception is a UDP receive application, which receives from multiple senders. In this case, the application must use }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{), in order to specify QoS parameters without calling }{\b WSAConnect }{(which would limit the socket to receive traffic from a single sender). 
\par 
\par In other cases, applications may use }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to specify QoS parameters, even if one of the connection oriented calls is also used. This usage allows an application to modify QoS parameters at any time after they were originally indicated in one of the connection oriented calls. It also allows the application to separate the specification of the QoS parameters from the determination of local and peer addresses implicit in the connection oriented call.  
\par {\*\bkmkstart _Toc384459477}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 5.4\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Terminating QoS Service{\*\bkmkend _Toc384459477}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The previous paragraphs discuss the method by which applications }{\i invoke}{ RSVP processing. Several events may cause the }{\i termination}{ of RSVP processing associated with a socket.  Specific examples  include:
\par 
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Closing a socket by a call to }{\b closecocket}{.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Shutting down a socket by calling }{\b shutdown}{.}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ Note that shutting down a socket for reception or transmission only, will not terminate QoS processing for transmission or reception, respectively.}}}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Calls to }{\b WSAConnect }{with a NULL peer address.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Calls to }{\b WSAIoctl }{(}{\i SIO_SET_QOS}{) with }{\i\fs16 SERVICETYPE_}{\fs16  }{\i\fs16 NOTRAFFIC}{\i  }{or }{\i\fs16 SERVICETYPE_BESTEFFORT}{\i .}{
\par }\pard \nowidctlpar\widctlpar\adjustright {
\par Note that in the first two cases, all RSVP processing on the socket will be terminated. However, in the third case, it is possible to terminate only sending or only receiving RSVP processing by selectively }{\fs16 specifying }{\i\fs16 SERVICETYPE_NOTRAFFIC}{\i  }{or }{\i\fs16 SERVICETYPE_BESTEFORT}{\i  }{in the }{\i SendingFlowspec }{or }{\i ReceivingFlowspec}{, respectively.
\par 
\par In general, any event that closes a socket, will also terminate RSVP processing on the socket.
\par {\*\bkmkstart _Toc384459478}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 6\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Detailed Mapping of GQoS to RSVP - QoS Parameters{\*\bkmkend _Toc384459478}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this section, we discuss the mapping of QoS parameters from GQoS to RSVP.
\par 
\par Winsock2 QoS calls include two }{\i FLOWSPEC }{structures, a }{\i SendingFlowspec }{and a }{\i ReceivingFlowspec}{. The }{\i SendingFlowspec }{is used to invoke RSVP sender processing and the }{\i ReceivingFlowspec }{is used to invoke receiver processing.  RSVP sender processing requires the inclusion of a }{\i Tspec}{ with }{\i PATH }{messages. The }{\i Tspec }{describes the traffic flow offered by the sender and is readily derived from the }{\i SendingFlowspec}{.  RSVP receiver processing varies depending on the service type requested. Receiver processing for controlled load service requires inclusion of a }{\i Tspec }{with }{\i RESV }{messages. Receiver processing for guaranteed load service requires inclusion of a }{\i Tspec }{and an }{\i Rspec}{. The }{\i Rspec }{defines the QoS desired by the receiver. 
\par 
\par The following table shows the general mapping of parameters from the Winsock2 QoS flowspecs to RSVP }{\i Tspec}{s and }{\i Rspec}{s.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx2178\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4239\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx5910\pard \nowidctlpar\widctlpar\intbl\adjustright {\b Winsock2 }{\b\i FLOWSPEC}{\cell }{\b Tspec}{\cell }{\b Rspec\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx2178\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4239\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx5910\pard \nowidctlpar\widctlpar\intbl\adjustright {\i TokenRate\cell TokenBucketRate}{\cell }{\i Rate\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i TokenBucketSize}{\cell }{\i TokenBucketSize}{\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i PeakBandwidth}{\cell }{\i PeakRate}{\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i MinimumPolicedSize\cell MinimumPolicedUnit\cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i MaxSduSize}{\cell }{\i MaximumPacketSize}{\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i DelayVariation\cell \cell DelaySlackTerm}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx2178\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4239\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx5910\pard \nowidctlpar\widctlpar\intbl\adjustright {\i Latency\cell \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\adjustright {
\par By specifying the value \lquote -1\rquote  as a }{\i FLOWSPEC }{parameter, applications can indicate that a default parameter should be inferred by the  RSVP SP.  Additionally, applications may specify }{\i\fs16 SERVICETYPE_NOCHANGE}{\i  }{in one or both }{\i FLOWSPEC}{s, to indicate that the QoS parameters in the corresponding direction(s) should remain unchanged. This is especially useful, for example,  to allow an application to change sending parameters without affecting receiving parameters (or vice versa).
\par {\*\bkmkstart _Toc384459479}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.1\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Tspec{\*\bkmkend _Toc384459479}
\par {\*\bkmkstart _Toc384459480}{\listtext\pard\plain\s3 \i\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.1.1\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {\i SenderTspec{\*\bkmkend _Toc384459480}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {On senders, RSVP uses the mapping tabulated above, to derive a }{\i SenderTspec }{from the }{\i SendingFlowspec}{, }{\i  }{for inclusion in }{\i PATH }{messages (with the possible exceptions noted below).
\par 
\par If the sending application does not specify the parameter }{\i MaxSduSize}{, the RSVP SP will use a default value of 1514 bytes.
\par 
\par If the application does not specify the parameter }{\i MinimumPolicedSize}{, the RSVP SP will use a default value of 128 bytes.
\par {\*\bkmkstart _Toc384459481}{\listtext\pard\plain\s3 \i\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.1.2\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {\i ReceiverTspec{\*\bkmkend _Toc384459481}
\par {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.1.2.1\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {Controlled Load Service
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {On receivers, for }{\i ControlledLoadService}{, the application may specify only the }{\i ServiceType }{parameter in the }{\i ReceivingFlowspec. }{In this case, the RSVP SP copies the }{\i SenderTspec }{from matching }{\i PATH }{messages}{\cs33\super \chftn {\footnote \pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {\cs33\super \chftn }{ See section titled }{\i Sending RESV Messages Based on Matching PATH State.}}}{, to the }{\i ReceiverTspec }{sent with the }{\i RESV }{messages (with the possible exceptions noted below). Alternatively, the receiving application may specify, in the }{\i ReceivingFlowspec}{, any of the }{\i Tspec }{parameters tabulated above. This will cause the RSVP SP to use the specified parameters in the }{\i ReceiverTspec }{sent with the }{\i RESV }{messages (instead of the corresponding parameter from received }{\i PATH }{messages). Parameters which are not specified by the application, should be set to \lquote -1\rquote , in the }{\i ReceivingFlowspec}{ and will be copied from the matching }{\i PATH }{messages.
\par {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.1.2.2\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {Guaranteed Service
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {On receivers, for }{\i GuaranteedService}{, the RSVP SP will copy the }{\i SenderTspec }{from matching }{\i PATH }{messages, to the }{\i ReceiverTspec }{sent with the }{\i RESV }{messages (with the possible exceptions noted below). The application cannot override }{\i Tspec }{parameters in this case.  
\par {\listtext\pard\plain\s4 \b\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.1.2.3\tab}}\pard\plain \s4\fi-864\li864\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx864\ls1\ilvl3\outlinelevel3\adjustright \b\f1\cgrid {Exceptions
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the case of Wildcard Filter  reservation styles,  multiple }{\i PATH }{messages may be  received, corresponding to the same session, but with different }{\i SenderTspec}{s (representing different senders). In this case,  the RSVP SP will copy the greater (as determined by the RSVP least upper bound calculation) of the }{\i SenderTspec}{s, to the }{\i ReceiverTspec }{included with }{\i RESV }{messages.
\par 
\par The RSVP SP will populate the }{\i MaximumPacketSize }{in the }{\i ReceiverTspec }{with the }{\i PATH_MTU }{value from the }{\i Adspec }{in the corresponding inbound }{\i PATH }{message. If there are multiple }{\i PATH }{messages, the lowest }{\i PATH_MTU }{value from all corresponding }{\i Adspec}{s, will be used. 
\par {\*\bkmkstart _Toc384459482}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.2\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Rspec{\*\bkmkend _Toc384459482}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The }{\i Rspec }{is included by the RSVP SP in }{\i RESV }{messages sent on behalf of a receiving application, only when }{\i GuaranteedService }{is specified by the receiving application. The application is expected to specify two of the three parameters; }{\i TokenRate}{, }{\i DelayVariation }{and }{\i Latency}{, as shown in the following table:
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\b Application specifies:}{\b\i \cell }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748{\b RSVP SP constructs }{\b\i Rspec}{\b :}{\b\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl\adjustright {\i TokenRate }{and }{\i DelayVariation}{\cell {\pntext\pard\plain\intbl\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\intbl{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\i Rate }{is copied from }{\i TokenRate}{
\par {\pntext\pard\plain\intbl\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\intbl{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\i DelaySlackTerm }{is copied from }{\i DelayVariation}{
\par {\pntext\pard\plain\intbl\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\intbl{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\i Latency }{parameter ignored.\cell }\pard \nowidctlpar\widctlpar\intbl{\*\pn \pnlvlcont\ilvl0\ls0\pnrnot0\pndec }\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4320\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8748\pard \nowidctlpar\widctlpar\intbl{\*\pn \pnlvlcont\ilvl0\ls0\pnrnot0\pndec }\adjustright {\i DelayVariation }{and }{\i Latency}{\cell {\pntext\pard\plain\intbl\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\intbl{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\i Rate }{parameter of }{\i Rspec }{calculated based  on }{\i DelayVariation }{and }{\i Latency }{and other parameters obtained from }{\i Adspec}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\adjustright {
\par If the application does not specify two of the three parameters (all parameters set to \lquote -1\rquote ), then the RSVP SP will infer appropriate default values based on corresponding received }{\i PATH }{messages.
\par {\*\bkmkstart _Toc384459483}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 6.3\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Service Types{\*\bkmkend _Toc384459483}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The following values may be specified in the }{\i ServiceType }{parameter of the }{\i SendingFlowspec }{and the }{\i ReceivingFlowspec}{:
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw10 \trbrdrl\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrh\brdrs\brdrw10 \trbrdrv\brdrs\brdrw10 \clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx2610\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx5582\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx8747\pard \nowidctlpar\widctlpar\intbl\adjustright {\b\fs16 SERVICETYPE_\cell }{\b In }{\b\i SendingFlowspec\cell }{\b In }{\b\i ReceivingFlowspec\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw10 \trbrdrl\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrh\brdrs\brdrw10 \trbrdrv\brdrs\brdrw10 \clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx2610\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx5582\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx8747\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 BESTEFFORT\cell }{Indicates that only best-effort service is supported for this traffic flow.\cell Requests best-effort service (no QoS treatment)\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 NOTRAFFIC\cell }{Indicates that there will be no traffic in this direction. On duplex capable media, this signals underlying software to setup unidirectional connections only.\cell Indicates that there will be no traffic in this direction. On duplex capable media, this signals underlying software to setup unidirectional connections only.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 CONTROLLEDLOAD\cell }{Indicates that only controlled load service is supported for this trafic flow.\cell Per the }{\i Intserv }{specification.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 GUARANTEED\cell }{Indicates that only guaranteed service is supported for this trafic flow.\cell Per the }{\i Intserv }{specification.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 NETWORK_UNAVAILABLE\cell }{May be used by certain service providers to indicate a loss of network service in the corresponding direction.\cell May be used by certain service providers to indicate a loss of network service in the corresponding direction.\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 GENERAL_INFORMATION\cell }{Indicates that all service types are supported or this traffic flow.\cell N/A\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 NO_CHANGE\cell }{Allows an application to modify QoS in one direction, while leaving the other unchanged, or to provide }{\i ProviderSpecific }{parameters without altering vlues previously specified in the }{\i FLOWSPEC}{s. \cell Allows an application to modify QoS in one direction, while leaving the other unchanged, or to provide }{\i ProviderSpecific }{parameters without altering vlues previously specified in the }{\i FLOWSPEC}{s. \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw10 \trbrdrl\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrh\brdrs\brdrw10 \trbrdrv\brdrs\brdrw10 \clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx2610\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx5582\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx8747\pard \nowidctlpar\widctlpar\intbl\adjustright {\fs16 IMMEDIATE_TRAFFIC_CONTROL\cell }{Requests the service provider to activate traffic control coincident with provision of the }{\i FLOWSPEC}{. This value should be \lquote ored\rquote  with the service type specified.\cell N/A\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459484}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 7\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Reservation Styles{\*\bkmkend _Toc384459484}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Three reservation styles are recognized by RSVP. These are }{\i Fixed Filter }{(FF), }{\i Shared Explicit }{(SE) and }{\i Wildcard Filter }{(WF). Not all reservation styles can be accommodated using the GQoS interface (unless the }{\i ProviderSpecific}{ structure is also used). The RSVP SP will infer the reservation style desired by a receiving application per the following rules.
\par 
\par (For details on invocation of alternate reservation styles, see the section titled }{\i Use of the Provider Specific Structure}{).
\par {\*\bkmkstart _Toc384459485}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 7.1\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Fixed Filter - Unicast{\*\bkmkend _Toc384459485}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Receiving applications requesting QoS for a unicast session will be assumed to require the FF reservation style.  TCP receivers are always assumed to be unicast receivers. 
\par 
\par Note that UDP unicast receivers will be handled using FF style reservations, only if they call }{\b WSAConnect}{. UDP unicast receivers which do not call }{\b WSAConnect }{will be handled using WF style reservations.
\par {\*\bkmkstart _Toc384459486}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 7.2\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Wildcard Filter - Multicast{\*\bkmkend _Toc384459486}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Receiving applications requesting QoS for a multicast address and UDP applications which }{\i do not }{call }{\b WSAConnect}{, will be assumed to require the WF reservation style.  This is necessary because there is no means for the receiving application to specify selected senders for the multicast session. If an SE or FF style reservation is required, the }{\i ProviderSpecific }{structure must be used to supply the required }{\i flowdescriptor}{s or the RSVP Annex must be used. 
\par {\*\bkmkstart _Toc384459487}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 7.3\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Shared Explicit{\*\bkmkend _Toc384459487}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {SE reservations require the specification of multiple }{\i flowdescriptor}{s. The standard structures included with the Winsock2 GQoS interface do not provide for this.  Therefore, in general, the SE reservation style will require use of the }{\i ProviderSpecific }{structure or the RSVP Annex.
\par {\*\bkmkstart _Toc384459488}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 8\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Use of }{\i ProviderSpecific }{Structure{\*\bkmkend _Toc384459488}
\par }\pard\plain \s32\nowidctlpar\widctlpar\adjustright \fs20\cgrid {The GQoS interfaces support the QoS requirements of a majority of applications without using the }{\i ProviderSpecific }{buffer. In certain cases, the application will be required to provide information which cannot be provided via the standard GQoS parameters. In these cases, the application will provide additional parameters in the }{\i ProviderSpecific }{buffer which is a member of the }{\i QOS}{ structure. The following paragraphs describe the use of the }{\i ProviderSpecific }{structure. 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {
\par The }{\i ProviderSpecific }{buffer is of type }{\i WSABUF}{. This structure includes a length field and a pointer to a buffer. The buffer may include a number of objects.  Each object includes a }{\i type}{ field (which identifies the object), followed by a }{\i length}{ field (which contains the length of the object, excluding the header), followed by the object data itself. 
\par {\*\bkmkstart _Toc384459489}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 8.1\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {The RSVP_RESERVE_INFO Object{\*\bkmkend _Toc384459489}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This object may be used by applications to override the default reservation styles. It includes a }{\i Style }{parameter, which specifies the reservation style to be used, and allows for the specification of a list of }{\i flowdescriptors}{.  For detailed structure formats, refer to the \ldblquote ws2rsvp.h\rdblquote  header file.
\par 
\par The following reservation styles may be specified:
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\i RSVP_WILDCARD_SYLE }{- Used to request RSVP to make reservations using the WF style. Note that this is the default for multicast receivers and unconnected UDP unicast receivers, while FF is the default for connected unicast receivers. This command type can be used to override the default FF style for connected unicast receivers.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\i RSVP_FIXED_FILTER_STYLE}{ - This style object may be used to override the default WF style for multicast receivers (or unconnected UDP unicast receivers). It may also be used to generate multiple FF style reservations where only a single FF style reservation would have been generated by default (connected unicast receivers).
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {\i RSVP_SHARED_EXPLICIT_STYLE }{- Used to request RSVP to make reservations for a number of explicitly specified sources (}{\i filterpsecs}{).
\par }\pard \nowidctlpar\widctlpar\adjustright {
\par The }{\i flowdescriptor }{list is specified using the }{\i RSVP_FLOWDESCRIPTOR }{structure, which is a member of the }{\i RSVP_RESERVE_INFO }{object.
\par {\*\bkmkstart _Toc384459490}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 8.2\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Alternate Reservation Styles{\*\bkmkend _Toc384459490}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The following reservation styles are provided by default:
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Unicast - single FF reservation.
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar{\*\pn \pnlvlblt\ilvl0\ls2\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls2\adjustright {Multicast - WF reservation.
\par }\pard \fi-360\li360\nowidctlpar\widctlpar\ilvl12\adjustright {
\par }\pard \nowidctlpar\widctlpar\adjustright {In the absence of an }{\i RSVP_RESERVE_INFO  }{object in the }{\i ProviderSpecific }{structure, these reservation styles will be provided. To override the default reservation styles, the }{\i RSPV_RESERVE_INFO }{object is used to specify a reservation style, and one or more }{\i RSVP_FLOWDESCRIPTOR }{structures follow, as described below.  
\par {\*\bkmkstart _Toc384459491}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.2.1\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Single FixedFilter Reservations{\*\bkmkend _Toc384459491}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This is the default reservation style invoked for connected unicast receivers. In order to invoke this reservation style for multicast receivers, it is necessary to override the default WF reservation style by specifying the FF style object, followed by a single }{\i RSVP_FLOWDESCRIPTOR}{.
\par {\*\bkmkstart _Toc384459492}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.2.2\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Multiple FixedFilter Reservations in a Single Reservation{\*\bkmkend _Toc384459492}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This style allows a receiver to reserve mutually exclusive flows from multiple, explicitly identified sources. It is invoked by specifying the FF style followed by a list of multiple }{\i RSVP_FLOWDESCRIPTOR}{s. Note that this style cannot be applied to TCP receivers since they are assumed to be connected to a single peer sender. Also, this style should not be applied to UDP receivers which have been connected (by calling }{\b WSAConnect}{), since the transport will discard data from all senders other than the one specified in the call to }{\b WSAConnect}{.
\par {\*\bkmkstart _Toc384459493}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.2.3\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Shared Explicit Reservations{\*\bkmkend _Toc384459493}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This style allows a receiver to specify multiple sources. The flow resources requested will be shared between all sources. It is invoked by specifying the corresponding style, followed by a single }{\i RSVP_FLOWDESCRIPTOR}{, which includes multiple }{\i RSVP_FILTERSPEC}{s. As is the case with multiple FF reservations, this style cannot be applied to TCP receivers or to connected UDP receivers.
\par {\*\bkmkstart _Toc384459494}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.2.4\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {WF Reservations{\*\bkmkend _Toc384459494}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This is the default  reservation style for multicast receivers and unconnected UDP receivers. In order to invoke this reservation style for TCP unicast receivers or for connected UDP unicast receivers, it is necessary to override the default FF reservation style by specifying the WF style, followed by a single }{\i RSVP_FLOWDESCRIPTOR}{.
\par {\*\bkmkstart _Toc384459495}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 8.3\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {The Priority Object{\*\bkmkend _Toc384459495}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The optional priority object contains two parameters. One indicates the transmission priority of a requested flow, the other represents the receive priority of the requested flow. It should be used to supplement the standard }{\i FLOWSPEC}{. Note that the transmit priority object will be used by the kernel to determine relative priorities for multiple flows of the }{\i same}{ Intserv service type. Priorities between Intserv service types are defined by the Intserv service type definitions.
\par {\*\bkmkstart _Toc384459496}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.3.1\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Packet Sequencing{\*\bkmkend _Toc384459496}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The transmit priority object will be interpreted by packet sequencing components in the network stack (typically in the kernel), and will determine which flow\rquote s packets get access to the wire under congested conditions. The typical packet sequencer will group flows according to the value specified in the priority object. Under congested conditions, a packet sequencer will send packets from each flow, in the highest priority group for which packets are pending. Flows within the group will be serviced in a round-robin fashion. 
\par 
\par Note that flow priority is machine-wide, not within an application. Thus, flows from two different applications, given the same priority, will be serviced as part of the same priority group.
\par {\*\bkmkstart _Toc384459497}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.3.2\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Avoiding Starvation{\*\bkmkend _Toc384459497} 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Although this priority mechanism has the potential to starve low priority flows this is unlikely to happen in a correctly configured system. Traffic control components will limit the admission of high priority flows such that the sustained capacity of the media is not exceeded. In this case, priority will determine the latencies perceived by packets on particular flows, under transient congestion conditions, while maintaining the sustained rates specified in the token bucket parameters of the }{\i FLOWSPEC}{.
\par {\*\bkmkstart _Toc384459498}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.3.3\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Usage{\*\bkmkend _Toc384459498}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The priority object can be used to specify a range of priorities between 0 and 7 (with 0 being the lowest priority and 7 being the highest). This value will be used by the kernel, together with the service type specified in the }{\i FLOWSPEC}{, to control the prioritization in the kernel. The absence of a priority object with a FLOWSPEC will be interpreted as default priority (equivalent to a priority object of 3).
\par 
\par The kernel is not required to implement multiple priority levels for each Intserv service class. Applications should specify relative priority by use of the Intserv service class whenever possible. Where it is absolutely necessary to specify prioritization within an Intserv service class, applications should restrict the priority levels to the minimum possible. For example \endash  use 7 to specify higher than default for the class, and 0 to specify lower than default for the class. 
\par 
\par Consider a video-conferencing/whiteboard application. Such an application should specify service as follows:
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw10 \trbrdrl\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrh\brdrs\brdrw10 \trbrdrv\brdrs\brdrw10 \clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx1553\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx5192\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx7684\pard \nowidctlpar\widctlpar\intbl\adjustright {\b Flow Type\cell ServiceType in FLOWSPEC\cell QOS_PRIORITY Object\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw10 \trbrdrl\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrh\brdrs\brdrw10 \trbrdrv\brdrs\brdrw10 \clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx1553\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx5192\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx7684\pard \nowidctlpar\widctlpar\intbl\adjustright {Whiteboard data\cell }{\fs16 SERVICETYPE_BESTEFFORT\cell }{No priority object\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Video data\cell }{\fs16 SERVICETYPE_CONTROLLEDLOAD\cell }{No priority object\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw10 \trbrdrl\brdrs\brdrw10 \trbrdrb\brdrs\brdrw10 \trbrdrr\brdrs\brdrw10 \trbrdrh\brdrs\brdrw10 \trbrdrv\brdrs\brdrw10 \clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx1553\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx5192\clvertalt\clbrdrt\brdrs\brdrw10 \clbrdrl\brdrs\brdrw10 \clbrdrb\brdrs\brdrw10 \clbrdrr\brdrs\brdrw10 \cltxlrtb \cellx7684\pard \nowidctlpar\widctlpar\intbl\adjustright {Audio data\cell }{\fs16 SERVICETYPE_CONTROLLEDLOAD\cell }{Priority object = 7\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459499}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.3.4\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Relation to Socket Group Priority{\*\bkmkend _Toc384459499}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The socket group priority mechanism has been eliminated. It was intended to specify relative priorities of sockets within a group, without defining the interpretation of priorities across groups. The priority object defined here, specifies the relative priority across all flows on the host.
\par {\*\bkmkstart _Toc384459500}{\listtext\pard\plain\s3 \f1\cgrid \hich\af1\dbch\af0\loch\f1 8.3.5\tab}}\pard\plain \s3\fi-720\li720\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx720\ls1\ilvl2\outlinelevel2\adjustright \f1\cgrid {Relation to 802.1p{\*\bkmkend _Toc384459500}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The priority object is unrelated to 802.1p traffic classes (which are indicated in tags attached to transmitted packets). The kernel traffic control components will determine the 802.1p traffic classes based on standardized Intserv FLOWSPEC to 802.1p traffic class mappings.
\par {\*\bkmkstart _Toc384459501}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 9\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Status Indications from the RSVP SP to Applications{\*\bkmkend _Toc384459501}
\par }\pard\plain \s36\nowidctlpar\widctlpar\adjustright \fs20\cgrid {Applications are expected to register interest in }{\i FD_QOS }{(}{\b WSAEventSelect}{ or }{\b WSAAsyncSelect}{) to receive  asynchronous notifications of status events from the RSVP SP. When a significant QoS event occurs on the specified socket, the RSVP SP posts a message or signals the event, as appropriate.   In either case, one of the error codes below will be included. Alternatively, these error codes may be retrieved by calling }{\b WSAEnumNetworkEvents}{. These error codes may be found in the \ldblquote winsock2.h\rdblquote  header file.
\par 
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_RECEIVERS - at least one }{\i RESV}{ has arrived
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_SENDERS - at least one }{\i PATH}{ has arrived
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_NO_SENDERS - there are no senders
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_NO_RECEIVERS - there are no receivers
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_REQUEST_CONFIRMED - reserve has been confirmed
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_ADMISSION_FAILURE - error due to lack of resources
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_POLICY_FAILURE - rejected for administrative reasons
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_BAD_STYLE - unknown or conflicting style
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_BAD_OBJECT - problem with some part of the }{\i flowspec}{
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_TRAFFIC_CTRL_ERROR - problem with some part of the }{\i filterspec}{
\par {\pntext\pard\plain\s36 \f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \s36\fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls13\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls13\adjustright {WSA_QOS_GENERIC_ERROR - general error
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {
\par When the }{\i FD_QOS }{event is signaled, the application should issue a }{\b WSAIoctl }{(}{\i SIO_GET_QOS}{) in order to retrieve a }{\i QOS }{structure. The returned }{\i QOS }{structure will indicate the current QoS parameters. The application should inspect these parameters to determine the extent of the QoS change. 
\par 
\par Note that, regardless of the status code indicated, the application must issue the }{\b WSAIoctl}{ (}{\i SIO_GET_QOS}{) in order to re-enable the }{\i FD_QOS }{event.
\par {\*\bkmkstart _Toc384459502}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 9.1\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Use of the ProviderSpecific Structure for Status Indications{\*\bkmkend _Toc384459502}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The status indication mechanisms described so far provide for the indication of a single status code, and the notification of a change in specific QoS parameters. Additional information can be indicated from the RSVP SP to applications, by use of the }{\i ProviderSpecific }{member of the }{\i QOS }{structure which is indicated in response to }{\b WSAIoctl }{(}{\i SIO_GET_QOS}{). 
\par 
\par When the }{\i ProviderSpecific}{ structure included is at least as the size of the }{\i QOS_STATUS}{ structure then the following additional information will be returned.  The first value in the structure is the same as the status value returned in response to }{\b WSAEnumNetworkEvents}{. Additional parameters provide the specific RSVP error code and error value from the standard RSVP }{\i ErrorSpec}{ object ( if available ).
\par {\*\bkmkstart _Toc384459503}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 10\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {WSAGetQoSByName{\*\bkmkend _Toc384459503}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {Applications call }{\b WSAGetQoSByName }{to retrieve a list of available QoS templates and to populate }{\i FLOWSPEC}{ structures with a named template. This facility is particularly useful to applications which are aware of the codec which they are using, since these tend to have well defined }{\i FLOWSPEC }{parameters. 
\par 
\par General usage of the }{\b WSAGetQoSByName }{call is as follows; 
\par 
\par {\pntext\pard\plain\fs20\cgrid \hich\af0\dbch\af0\loch\f0 1.\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlbody\ilvl0\ls16\pnrnot0\pndec\pnstart1\pnindent360\pnhang{\pntxta .}}\ls16\adjustright {Applications call }{\b WSAGetQoSByName }{with a NULL }{\i lpQoSName }{parameter and a pointer to a }{\i WSABUF s}{tructure, in the }{\i lpQoS }{parameter. 
\par {\pntext\pard\plain\fs20\cgrid \hich\af0\dbch\af0\loch\f0 2.\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlbody\ilvl0\ls16\pnrnot0\pndec\pnstart1\pnindent360\pnhang{\pntxta .}}\ls16\adjustright {Winsock  returns a list of QoS template names. 
\par {\pntext\pard\plain\fs20\cgrid \hich\af0\dbch\af0\loch\f0 3.\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlbody\ilvl0\ls16\pnrnot0\pndec\pnstart1\pnindent360\pnhang{\pntxta .}}\ls16\adjustright {The application selects a template name, based on the type of QoS flow it will be generating. It passes the selected template name to Winsock, in the }{\i lpQoSName }{parameter. It passes a pointer to the }{\i FLOWSPEC }{structure to be used, in the }{\i lpQoS }{parameter.
\par {\pntext\pard\plain\fs20\cgrid \hich\af0\dbch\af0\loch\f0 4.\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlbody\ilvl0\ls16\pnrnot0\pndec\pnstart1\pnindent360\pnhang{\pntxta .}}\ls16\adjustright {Winsock  fills in the }{\i FLOWSPEC }{structure with the parameters from the selected template.
\par }\pard \nowidctlpar\widctlpar\adjustright {
\par {\*\bkmkstart _Toc384459504}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 11\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {QoS For Socket Groups{\*\bkmkend _Toc384459504}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {The socket group mechanism for specifying QoS priority has been eliminated. Instead, priorities are specified by the }{\i ServiceType }{parameter of the }{\i FLOWSPEC }{structure. Applications may use the }{\i QOS_PRIORITY }{object in the }{\i ProviderSpecific }{buffer that accompanies flowspecs, to specify some degree of prioritization within the service class specified by }{\i ServiceType.
\par {\*\bkmkstart _Toc384459505}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 12\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Protocol Chaining{\*\bkmkend _Toc384459505}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {QoS aware applications are expected to call }{\b WSAEnumProtocols }{to get a list of }{\i WSAPROTOCOL_INFO }{structures, which describe the various protocol (chains) available as service providers. The application should inspect the }{\i XP1_QOS_SUPPORTED }{flag in the }{\i dwServiceFlags1 }{field of each structure, to determine whether QoS is supported by the protocol (chain). It may then scan additional fields of the }{\i WSAPROTOCOL_INFO}{, in particular, the }{\i szProtocol }{text field, to select a specific QoS provider. The RSVP SP will register the following chains:  
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx2430\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx4536\pard \nowidctlpar\widctlpar\intbl\adjustright {\b Description}{\cell }{\b iProtocol}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx2430\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx4536\pard \nowidctlpar\widctlpar\intbl\adjustright {RSVP over UDP\cell RSVP_UDP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {RSVP over TCP\cell RSVP_TCP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Traffic control over UDP\cell TC_UDP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx2430\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx4536\pard \nowidctlpar\widctlpar\intbl\adjustright {Traffic control over TCP\cell TC_TCP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\adjustright {
\par These chain configurations are available both to applications using the GQoS interface and to those using the RSVP specific annex interface.
\par 
\par Specific implementations of RSVP SPs may support additional underlying transport protocols. These will be indicated by the registration of corresponding protocol chains.
\par {\*\bkmkstart _Toc384459506}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 13\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Appendix A \endash  Sample Call Sequences{\*\bkmkend _Toc384459506}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the following paragraphs we illustrate examples of legitimate call sequences which may be invoked by QoS aware applications. Note that each sequence is shown to begin with a call to }{\b bind}{. Strictly speaking, this call is not required (except in the case of the passive TCP application calling }{\b WSAAccept}{) so long as the application calls one of the connection oriented calls (}{\b WSAConnect}{ or }{\b WSAJoinLeaf}{). The transport provider will bind on its behalf at that time.
\par {\*\bkmkstart _Toc384459507}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.1\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {UDP Unicast Sender, Bound Using INADDR_ANY{\*\bkmkend _Toc384459507}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this example, the sending application binds using }{\i INADDR_ANY}{. As a result, the RSVP SP calls }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{) as soon as the peer address is available from the application\rquote s call to }{\b WSAConnect}{. 
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8010\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8010\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAConnect }{(}{\i Sending Flowspec}{) }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{)\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{) returns}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8010\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459508}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.2\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {UDP Unicast Sender Bound to a Specific Address{\*\bkmkend _Toc384459508}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this example, the application binds using a specific address. The RSVP SP is not required to call }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{), and will not be responsible for directly handling routing changes. The application must handle routing changes if it wishes to maintain QoS following a routing change. It does so by closing the existing socket and creating a new one, bound to the new address.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4950\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4950\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{) }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{) returns }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_CHANGE}{)\cell }{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(specific address)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAConnect }{(}{\i Sending Flowspec}{) }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received }{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i FD_ROUTING_CHANGE }{indicated to app}{\i \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4950\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \nowidctlpar\widctlpar\intbl\adjustright {Close and recreate socket}{\i \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459509}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.3\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {UDP Unicast Sender, QoS Parameters Modified{\*\bkmkend _Toc384459509} 
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this example, a QoS session is initiated according to the QoS parameters supplied by the sender (with the }{\b WSAConnect }{call). The application later modifies the sending QoS by calling }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) with modified QoS parameters.
\par  
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAConnect }{(}{\i Sending Flowspec}{) }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{)\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{) returns}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_SET_QOS}{)\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{Send modified }{\i PATH }{messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459510}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.4\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {UDP Multicast Sender, QoS Parameters in WSAIoctl{\*\bkmkend _Toc384459510}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the following example, a sending UDP application binds a socket using }{\i INADDR_ANY }{. Later it calls }{\b WSAJoinLeaf}{, indicating the destination session address. However, since no QoS parameters are included with the call to }{\b WSAJoinLeaf}{, it does not begin RSVP processing. The application supplies QoS parameters later, with a call to }{\b WSAIoctl}{. At that time, the RSVP SP performs an interface query on the multicast session address to determine which address to use in the }{\i SenderTemplate}{.  The RSVP SP is then able to begin sending }{\i PATH }{messages.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAJoinLeaf }{(no flowspec) }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_SET_QOS}{)\cell }{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{)\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell WSAIoctl}{(}{\i SIO_LOCAL_INTERFACE_QUERY}{) returns}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8370\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459511}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.5\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {TCP Unicast Sender, QoS Parameters Included With ConditionFunc{\*\bkmkend _Toc384459511}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the following example, a unicast TCP sender accepts a connection from a receiving peer. The sender is the passive peer, indicating its preparedness to receive a connection, using }{\b WSAAccept}{. In this example, the }{\i ConditionFunc }{is used by the application to provide QoS parameters to the RSVP SP. The RSVP SP learns of the application\rquote s intent to invoke QoS at this time. Since this is a TCP socket, the RSVP SP can call }{\b getsockname }{to unambiguously obtain the address of the sending interface. This address is used to compose the }{\i SenderTemplate }{and to begin sending }{\i PATH }{messages. The RSVP SP calls }{\b getpeername }{following connection establishment, to obtain the remote peer\rquote s address. This address is used to generate the RSVP }{\i session }{address.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAAccept}{ }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }\pard\plain \s32\nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {RSVP SP calls }{\i ConditionFunc\cell }\pard\plain \nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application completes }{\i ConditionFunc\cell }\pard\plain \s32\nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\cell }\pard\plain \nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Transport completes }{\b WSAAccept\cell }\pard\plain \s32\nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\cell }\pard\plain \nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getsockname\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell getsockname}{ returns}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getpeername\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b getpeername }{returns\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459512}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.6\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {TCP Unicast Sender, WSAAccept Followed by WSAIoctl{\*\bkmkend _Toc384459512}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the following example, a unicast TCP sender accepts a connection from a receiving peer. The sender is the passive peer, indicating its preparedness to receive a connection, using }{\b WSAAccept}{. In this example, the }{\i ConditionFunc }{ is not used to provide QoS parameters. Instead, the application follows the acceptance of the connection, with a call to }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{). The RSVP SP learns of the application\rquote s intent to invoke QoS at this time. Since this is a TCP socket, the RSVP SP can call }{\b getsockname }{to unambiguously obtain the address of the sending interface. This address is used to compose the }{\i SenderTemplate }{and to begin sending }{\i PATH }{messages. The RSVP SP calls }{\b getpeername }{following connection establishment, to obtain the remote peer\rquote s address. This address is used to generate the RSVP }{\i session }{address.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAAccept}{ }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Transport completes }{\b WSAAccept\cell }\pard\plain \s32\nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\cell }\pard\plain \nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_SET_QOS}{)\cell }{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getsockname\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell getsockname}{ returns}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getpeername\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b getpeername }{returns\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459513}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.7\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {TCP Unicast Sender, WSAIoctl Precedes WSAAccept{\*\bkmkend _Toc384459513}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This example is similar to the previous example, except that the sending application indicates its interest in sending QoS traffic by calling }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) prior to connection establishment. In this case, the RSVP SP has all the information required to begin transmitting }{\i PATH }{messages upon completion of }{\b WSAAccept }{(which includes the receiving peer\rquote s address). As in the previous example, the RSVP SP generates the }{\i SenderTemplate }{based on the address returned from }{\b getsockname }{and generates the }{\i session }{based on the address returned from }{\b getpeername}{.
\par  
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_SET_QOS}{)\cell }{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAAccept}{ }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Transport completes }{\b WSAAccept\cell }\pard\plain \s32\nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {Peer address extracted by RSVP SP\cell }\pard\plain \nowidctlpar\widctlpar\intbl\adjustright \fs20\cgrid {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getsockname\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell getsockname}{ returns}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getpeername\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b getpeername }{returns\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3528\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7344\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459514}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.8\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {TCP Unicast Sender, Active Sender{\*\bkmkend _Toc384459514}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this example, the TCP sender is the active TCP peer.  Consequently, the sender calls }{\b WSAConnect}{. This is similar to the UDP sender case (with the exception that the local address and the peer address can be unambiguously determined by calling }{\b getsockname}{ and }{\b getpeername }{following connection establishment).
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx6884\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Sending Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx6884\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAConnect }{(}{\i Sending Flowspec}{) }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getsockname\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell getsockname}{ returns}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getpeername\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b getpeername }{returns\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Begin sending }{\i PATH}{ messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \cell RESV }{messages received}{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Indicate presence of }{\i RESV }{state to app\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3048\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx6884\pard \nowidctlpar\widctlpar\intbl\adjustright {Begin sending QoS traffic \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459515}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.9\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {UDP Receiver, Bound to INADDR_ANY, Followed by WSAConnect{\*\bkmkend _Toc384459515}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this example, a receiving application binds using }{\i INADDR_ANY}{. As a result, the RSVP SP will match any }{\i PATH }{messages for which the }{\i session}{ port matches the bound socket\rquote s port, and for which the }{\i SenderTemplate}{ matches the peer address specified in the connect, regardless of the }{\i session }{address.
\par 
\par Note that, if }{\i PATH }{messages were received, prior to the }{\b WSAConnect}{, then if they are determined to match, the RSVP SP will begin to send }{\i RESV }{messages immediately following the }{\b WSAConnect}{. This is depicted in the following sequence.
\par 
\par Also in this example, the receiving application issues a }{\b WSAConnect}{. As a result, traffic originating from peers other than the one specified, will be discarded by the transport provider. 
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3908\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7214\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Receiving Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3908\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7214\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAConnect }{(}{\i Receiving Flowspec}{) from app}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Matching }{\i PATH }{messages received\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP begins sending }{\i RESV }{messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx3908\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7214\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic begins to arrive at application\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row {\*\bkmkstart _Toc384459516}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.10\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {UDP Receiver, Bound to Specific Address, Followed by WSAIoctl{\*\bkmkend _Toc384459516}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this example, the receiving application binds using a specific address. As a result, the RSVP SP will be more discriminating in searching for matching }{\i PATH }{state. It will match only }{\i PATH }{messages for which both the }{\i session }{address and port, match the bound socket\rquote s address and port. However, since no sender was specified (no }{\b WSAConnect}{), }{\i SenderTemplate }{will not be considered when searching for matching }{\i PATH }{state.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4398\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8460\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Receiving Application\cell RSVP SP}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4398\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8460\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{\i PATH }{messages received\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(specific address)}{\b \cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_SET_QOS}{) with }{\i ReceivingFlowspec}{\b \cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{Match found in received }{\i PATH }{state}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP begins sending }{\i RESV }{messages}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4398\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8460\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic begins to arrive at application\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459517}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.11\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {UDP Receiver, WSAIoctl Followed by WSAConnect{\*\bkmkend _Toc384459517}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the following example, the receiving application calls }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to associate QoS parameters with the socket. }{\i PATH }{state is matched at this time, initiating the transmission of WF style }{\i RESV }{messages. Subsequently, the application calls }{\b WSAConnect}{, specifying a peer sender and causing the RSVP SP to send FF style }{\i RESV }{messages, selectively, for the specified sender.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4788\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8514\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Receiving Application\cell RSVP SP\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4788\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8514\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{\i PATH }{messages received\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(}{\i INADDR_ANY}{)}{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl }{(}{\i Sending Flowspec}{) }{\b \cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Match found in received }{\i PATH }{state }{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{RSVP begins sending WF }{\i RESV }{messages}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic begins to arrive from all senders\cell }{\i \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\i \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAConnect}{ (no flowspec)\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Match found in received }{\i PATH }{state\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP begins sending FF }{\i REV }{messages\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4788\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx8514\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic arrives only from sender specified\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459518}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.12\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Multicast UDP Receiver, WSAIoctl Followed by WSAJoinLeaf{\*\bkmkend _Toc384459518}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In the following example, a UDP receiving application calls }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) to associate QoS parameters with a multicast socket. Since the socket is multicast and has not yet been joined to a multicast group, no }{\i RESV }{messages will be sent on its behalf. Subsequently, the application calls }{\b  WSAJoinLeaf }{ to join a multicast group. At this time, }{\i PATH }{state for the multicast group is matched, and the RSVP SP begins sending }{\i RESV }{messages.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Receiving Application\cell RSVP SP}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{\i PATH }{messages received\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(specific address)}{\b \cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b WSAIoctl}{(}{\i SIO_SET_QOS}{) with }{\i ReceivingFlowspec}{\b \cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{No match found in received }{\i PATH }{state}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAJoinLeaf\cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Match found in received }{\i PATH }{state\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP begins sending }{\i RESV }{messages}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic begins to arrive at application\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459519}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.13\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Multicast UDP Receiver, QoS Parameters in WSAJoinLeaf{\*\bkmkend _Toc384459519}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {In this example, QoS parameters are provided at the time the multicast group is joined.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Receiving Application\cell RSVP SP}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{\i PATH }{messages received\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(specific address)}{\b \cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAJoinLeaf\cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Match found in received }{\i PATH }{state\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP begins sending }{\i RESV }{messages}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic begins to arrive at application\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459520}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.14\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Unicast TCP Receiver, Active Receiver{\*\bkmkend _Toc384459520}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This example illustrates the typical case of active receiver. Recall that, for TCP receivers, }{\i PATH }{state will not be matched until the specific sending peer\rquote s address is known. The RSVP SP determines the sending peer\rquote s address by calling }{\b getpeername }{following connection establishment.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Receiving Application\cell RSVP SP}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{\i PATH }{messages received\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(specific address)}{\b \cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAConnect\cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getpeername\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b getpeername }{returns\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Match found in received }{\i PATH }{state\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP begins sending }{\i RESV }{messages}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic begins to arrive at application\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459521}{\listtext\pard\plain\s2 \b\i\f1\cgrid \hich\af1\dbch\af0\loch\f1 13.15\tab}}\pard\plain \s2\fi-576\li576\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx576\ls1\ilvl1\outlinelevel1\adjustright \b\i\f1\cgrid {Unicast TCP Receiver, Passive Receiver{\*\bkmkend _Toc384459521}
\par }\pard\plain \nowidctlpar\widctlpar\adjustright \fs20\cgrid {This example illustrates the atypical case of a passive receiver. As a passive receiver, the application calls }{\b WSAAccept }{to indicate readiness to accept a connection. In this case, the RSVP SP obtains the peer address by calling }{\b getpeername }{following connection establishment. The peer address returned is used to find matching }{\i PATH }{state for a specific sending peer. 
\par 
\par Note that, in this example,the application does not indicate its interest in receiving QoS traffic using the }{\i ConditionFunc}{.  Instead,  it  does so by providing a }{\i ReceivingFlowspec}{, with a call to }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{). In this case, the application calls }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) }{\i after }{the connection is established, delaying the transmission of }{\i RESV }{messages until that time. Alternatively, it may call }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{) before a connection is established.
\par 
\par }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw30 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \qc\nowidctlpar\widctlpar\intbl\adjustright {\b Receiving Application\cell RSVP SP}{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw15 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \cell }{\i PATH }{messages received\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b bind }{(specific address)}{\b \cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAAccept\cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Transport completes }{\b WSAAccept\cell }{\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {Application calls }{\b WSAIoctl}{(}{\i SIO_SET_QOS}{)\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP SP calls }{\b getpeername\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell }{\b getpeername }{returns\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell Match found in received }{\i PATH }{state\cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row }\pard \nowidctlpar\widctlpar\intbl\adjustright {\cell RSVP begins sending }{\i RESV }{messages}{\b \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\b \row }\trowd \trgaph108\trleft-108\trbrdrt\brdrs\brdrw30 \trbrdrl\brdrs\brdrw30 \trbrdrb\brdrs\brdrw30 \trbrdrr\brdrs\brdrw30 \trbrdrh\brdrs\brdrw15 \trbrdrv\brdrs\brdrw15 \clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw30 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw15 \cltxlrtb \cellx4383\clvertalt\clbrdrt\brdrs\brdrw15 \clbrdrl\brdrs\brdrw15 \clbrdrb\brdrs\brdrw30 \clbrdrr\brdrs\brdrw30 \cltxlrtb \cellx7869\pard \nowidctlpar\widctlpar\intbl\adjustright {QoS traffic begins to arrive at application\cell \cell }\pard \nowidctlpar\widctlpar\intbl\adjustright {\row {\*\bkmkstart _Toc384459522}{\listtext\pard\plain\s1 \b\f1\fs28\kerning28\cgrid \hich\af1\dbch\af0\loch\f1 14\tab}}\pard\plain \s1\fi-432\li432\sb240\sa60\keepn\nowidctlpar\widctlpar\jclisttab\tx432\ls1\outlinelevel0\adjustright \b\f1\fs28\kerning28\cgrid {Bibliography{\*\bkmkend _Toc384459522}
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard\plain \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls15\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls15\adjustright \fs20\cgrid {\i Windows Sockets 2 Protocol-Specific Annex, rev. 2.0.2, January22, 1996}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls15\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls15\adjustright {\i Windows Sockets 2 Application Programming Interface, rev. 2.2.0, May, 1996}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls15\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls15\adjustright {\i Windows Sockets 2 Service Provider Interface, rev. 2.2.0,  May, 1996}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls15\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls15\adjustright {\i IETF Draft of RSVP Protocol, version 14, November 5, 1996}{
\par {\pntext\pard\plain\f3\fs20\cgrid \loch\af3\dbch\af0\hich\f3 \'b7\tab}}\pard \fi-360\li360\nowidctlpar\widctlpar\jclisttab\tx360{\*\pn \pnlvlblt\ilvl0\ls15\pnrnot0\pnf3\pnstart1\pnindent360\pnhang{\pntxtb \'b7}}\ls15\adjustright {\i The Use of RSVP With Integrated Services (from the INTSERV WG of the IETF)}{
\par }}